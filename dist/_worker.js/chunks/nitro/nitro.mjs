import{Buffer as e}from"node:buffer";import t from"node:process";import{env as s}from"cloudflare:workers";import{EventEmitter as a}from"node:events";import{setImmediate as c,clearImmediate as u}from"node:timers";import{AsyncLocalStorage as d}from"node:async_hooks";"global"in globalThis||(globalThis.global=globalThis);class ReadStream{fd;isRaw=!1;isTTY=!1;constructor(e){this.fd=e}setRawMode(e){return this.isRaw=e,this}}class WriteStream{fd;columns=80;rows=24;isTTY=!1;constructor(e){this.fd=e}clearLine(e,t){return t&&t(),!1}clearScreenDown(e){return e&&e(),!1}cursorTo(e,t,s){return s&&"function"==typeof s&&s(),!1}moveCursor(e,t,s){return s&&s(),!1}getColorDepth(e){return 1}hasColors(e,t){return!1}getWindowSize(){return[this.columns,this.rows]}write(e,t,s){e instanceof Uint8Array&&(e=(new TextDecoder).decode(e));try{console.log(e)}catch{}return s&&"function"==typeof s&&s(),!1}}function createNotImplementedError(e){return new Error(`[unenv] ${e} is not implemented yet!`)}function notImplemented(e){return Object.assign(()=>{throw createNotImplementedError(e)},{__unenv__:!0})}const h="22.14.0";class Process extends a{env;hrtime;nextTick;constructor(e){super(),this.env=e.env,this.hrtime=e.hrtime,this.nextTick=e.nextTick;for(const e of[...Object.getOwnPropertyNames(Process.prototype),...Object.getOwnPropertyNames(a.prototype)]){const t=this[e];"function"==typeof t&&(this[e]=t.bind(this))}}emitWarning(e,t,s){console.warn(`${s?`[${s}] `:""}${t?`${t}: `:""}${e}`)}emit(...e){return super.emit(...e)}listeners(e){return super.listeners(e)}#e;#t;#r;get stdin(){return this.#e??=new ReadStream(0)}get stdout(){return this.#t??=new WriteStream(1)}get stderr(){return this.#r??=new WriteStream(2)}#n="/";chdir(e){this.#n=e}cwd(){return this.#n}arch="";platform="";argv=[];argv0="";execArgv=[];execPath="";title="";pid=200;ppid=100;get version(){return`v${h}`}get versions(){return{node:h}}get allowedNodeEnvironmentFlags(){return new Set}get sourceMapsEnabled(){return!1}get debugPort(){return 0}get throwDeprecation(){return!1}get traceDeprecation(){return!1}get features(){return{}}get release(){return{}}get connected(){return!1}get config(){return{}}get moduleLoadList(){return[]}constrainedMemory(){return 0}availableMemory(){return 0}uptime(){return 0}resourceUsage(){return{}}ref(){}unref(){}umask(){throw createNotImplementedError("process.umask")}getBuiltinModule(){}getActiveResourcesInfo(){throw createNotImplementedError("process.getActiveResourcesInfo")}exit(){throw createNotImplementedError("process.exit")}reallyExit(){throw createNotImplementedError("process.reallyExit")}kill(){throw createNotImplementedError("process.kill")}abort(){throw createNotImplementedError("process.abort")}dlopen(){throw createNotImplementedError("process.dlopen")}setSourceMapsEnabled(){throw createNotImplementedError("process.setSourceMapsEnabled")}loadEnvFile(){throw createNotImplementedError("process.loadEnvFile")}disconnect(){throw createNotImplementedError("process.disconnect")}cpuUsage(){throw createNotImplementedError("process.cpuUsage")}setUncaughtExceptionCaptureCallback(){throw createNotImplementedError("process.setUncaughtExceptionCaptureCallback")}hasUncaughtExceptionCaptureCallback(){throw createNotImplementedError("process.hasUncaughtExceptionCaptureCallback")}initgroups(){throw createNotImplementedError("process.initgroups")}openStdin(){throw createNotImplementedError("process.openStdin")}assert(){throw createNotImplementedError("process.assert")}binding(){throw createNotImplementedError("process.binding")}permission={has:notImplemented("process.permission.has")};report={directory:"",filename:"",signal:"SIGUSR2",compact:!1,reportOnFatalError:!1,reportOnSignal:!1,reportOnUncaughtException:!1,getReport:notImplemented("process.report.getReport"),writeReport:notImplemented("process.report.writeReport")};finalization={register:notImplemented("process.finalization.register"),unregister:notImplemented("process.finalization.unregister"),registerBeforeExit:notImplemented("process.finalization.registerBeforeExit")};memoryUsage=Object.assign(()=>({arrayBuffers:0,rss:0,external:0,heapTotal:0,heapUsed:0}),{rss:()=>0});mainModule=void 0;domain=void 0;send=void 0;exitCode=void 0;channel=void 0;getegid=void 0;geteuid=void 0;getgid=void 0;getgroups=void 0;getuid=void 0;setegid=void 0;seteuid=void 0;setgid=void 0;setgroups=void 0;setuid=void 0;_events=void 0;_eventsCount=void 0;_exiting=void 0;_maxListeners=void 0;_debugEnd=void 0;_debugProcess=void 0;_fatalException=void 0;_getActiveHandles=void 0;_getActiveRequests=void 0;_kill=void 0;_preload_modules=void 0;_rawDebug=void 0;_startProfilerIdleNotifier=void 0;_stopProfilerIdleNotifier=void 0;_tickCallback=void 0;_disconnect=void 0;_handleQueue=void 0;_pendingMessage=void 0;_channel=void 0;_send=void 0;_linkedBinding=void 0}const f=Object.create(null),g=globalThis.process,_getEnv=e=>globalThis.__env__||g?.env||(e?f:globalThis),m=new Proxy(f,{get:(e,t)=>_getEnv()[t]??f[t],has:(e,t)=>t in _getEnv()||t in f,set:(e,t,s)=>(_getEnv(!0)[t]=s,!0),deleteProperty:(e,t)=>(delete _getEnv(!0)[t],!0),ownKeys(){const e=_getEnv();return Object.keys(e)},getOwnPropertyDescriptor(e,t){const s=_getEnv();if(t in s)return{value:s[t],writable:!0,enumerable:!0,configurable:!0}}}),_=Object.assign(function(e){const t=Date.now(),s=Math.trunc(t/1e3),a=t%1e3*1e6;if(e){let t=s-e[0],c=a-e[0];return c<0&&(t-=1,c=1e9+c),[t,c]}return[s,a]},{bigint:function(){return BigInt(1e6*Date.now())}});globalThis.__env__=s;const x=new Process({env:m,hrtime:_,nextTick:t.nextTick});for(const e of["exit","getBuiltinModule","platform"])e in t&&(x[e]=t[e]);t.features&&Object.defineProperty(x,"features",{get:()=>t.features});const{abort:R,addListener:E,allowedNodeEnvironmentFlags:C,hasUncaughtExceptionCaptureCallback:S,setUncaughtExceptionCaptureCallback:T,loadEnvFile:j,sourceMapsEnabled:H,arch:I,argv:P,argv0:M,chdir:O,config:B,connected:N,constrainedMemory:q,availableMemory:$,cpuUsage:U,cwd:L,debugPort:z,dlopen:K,disconnect:W,emit:D,emitWarning:F,env:Q,eventNames:V,execArgv:Z,execPath:J,exit:G,finalization:X,features:Y,getBuiltinModule:ee,getActiveResourcesInfo:te,getMaxListeners:re,hrtime:ne,kill:oe,listeners:se,listenerCount:ae,memoryUsage:ie,nextTick:ce,on:ue,off:de,once:le,pid:he,platform:fe,ppid:pe,prependListener:ge,prependOnceListener:me,rawListeners:ye,release:we,removeAllListeners:be,removeListener:ve,report:_e,resourceUsage:xe,setMaxListeners:Re,setSourceMapsEnabled:Ee,stderr:ke,stdin:Ce,stdout:Ae,title:Se,umask:Te,uptime:je,version:He,versions:Ie,domain:Pe,initgroups:Me,moduleLoadList:Oe,reallyExit:Be,openStdin:Ne,assert:qe,binding:$e,send:Ue,exitCode:Le,channel:ze,getegid:Ke,geteuid:We,getgid:De,getgroups:Fe,getuid:Qe,setegid:Ve,seteuid:Ze,setgid:Je,setgroups:Ge,setuid:Xe,permission:Ye,mainModule:et,_events:tt,_eventsCount:rt,_exiting:nt,_maxListeners:ot,_debugEnd:st,_debugProcess:at,_fatalException:it,_getActiveHandles:ct,_getActiveRequests:ut,_kill:dt,_preload_modules:lt,_rawDebug:ht,_startProfilerIdleNotifier:ft,_stopProfilerIdleNotifier:pt,_tickCallback:gt,_disconnect:mt,_handleQueue:yt,_pendingMessage:wt,_channel:bt,_send:vt,_linkedBinding:_t}=x,xt=globalThis.process;globalThis.process=xt?new Proxy(xt,{get:(e,t,s)=>Reflect.has(e,t)?Reflect.get(e,t,s):Reflect.get(x,t,s)}):x,globalThis.Buffer||(globalThis.Buffer=e),globalThis.setImmediate||(globalThis.setImmediate=c),globalThis.clearImmediate||(globalThis.clearImmediate=u);const Rt=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Et=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,kt=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function jsonParseTransform(e,t){if(!("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t))return t;!function(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}(e)}function destr(e,t={}){if("string"!=typeof e)return e;if('"'===e[0]&&'"'===e[e.length-1]&&-1===e.indexOf("\\"))return e.slice(1,-1);const s=e.trim();if(s.length<=9)switch(s.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!kt.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(Rt.test(e)||Et.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,jsonParseTransform)}return JSON.parse(e)}catch(s){if(t.strict)throw s;return e}}const Ct=/#/g,At=/&/g,St=/\//g,Tt=/=/g,jt=/\+/g,Ht=/%5e/gi,It=/%60/gi,Pt=/%7c/gi,Mt=/%20/gi;function encodeQueryValue(e){return(t="string"==typeof e?e:JSON.stringify(e),encodeURI(""+t).replace(Pt,"|")).replace(jt,"%2B").replace(Mt,"+").replace(Ct,"%23").replace(At,"%26").replace(It,"`").replace(Ht,"^").replace(St,"%2F");var t}function encodeQueryKey(e){return encodeQueryValue(e).replace(Tt,"%3D")}function decode(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function decodeQueryKey(e){return decode(e.replace(jt," "))}function decodeQueryValue(e){return decode(e.replace(jt," "))}function parseQuery(e=""){const t=Object.create(null);"?"===e[0]&&(e=e.slice(1));for(const s of e.split("&")){const e=s.match(/([^=]+)=?(.*)/)||[];if(e.length<2)continue;const a=decodeQueryKey(e[1]);if("__proto__"===a||"constructor"===a)continue;const c=decodeQueryValue(e[2]||"");void 0===t[a]?t[a]=c:Array.isArray(t[a])?t[a].push(c):t[a]=[t[a],c]}return t}function stringifyQuery(e){return Object.keys(e).filter(t=>void 0!==e[t]).map(t=>{return s=t,"number"!=typeof(a=e[t])&&"boolean"!=typeof a||(a=String(a)),a?Array.isArray(a)?a.map(e=>`${encodeQueryKey(s)}=${encodeQueryValue(e)}`).join("&"):`${encodeQueryKey(s)}=${encodeQueryValue(a)}`:encodeQueryKey(s);var s,a}).filter(Boolean).join("&")}const Ot=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Bt=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,Nt=/^([/\\]\s*){2,}[^/\\]/,qt=/^\.?\//;function hasProtocol(e,t={}){return"boolean"==typeof t&&(t={acceptRelative:t}),t.strict?Ot.test(e):Bt.test(e)||!!t.acceptRelative&&Nt.test(e)}function withoutTrailingSlash(e="",t){return(function(e=""){return e.endsWith("/")}(e)?e.slice(0,-1):e)||"/"}function withTrailingSlash(e="",t){return e.endsWith("/")?e:e+"/"}function withLeadingSlash(e=""){return function(e=""){return e.startsWith("/")}(e)?e:"/"+e}function withoutBase(e,t){if(isEmptyURL(t))return e;const s=withoutTrailingSlash(t);if(!e.startsWith(s))return e;const a=e[s.length];if(a&&"/"!==a&&"?"!==a)return e;const c=e.slice(s.length);return"/"===c[0]?c:"/"+c}function withQuery(e,t){const s=parseURL(e),a={...parseQuery(s.search),...t};return s.search=stringifyQuery(a),function(e){const t=e.pathname||"",s=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",a=e.hash||"",c=e.auth?e.auth+"@":"",u=e.host||"",d=e.protocol||e[$t]?(e.protocol||"")+"//":"";return d+c+u+t+s+a}(s)}function getQuery$1(e){return parseQuery(parseURL(e).search)}function isEmptyURL(e){return!e||"/"===e}function joinURL(e,...t){let s=e||"";for(const e of t.filter(e=>function(e){return e&&"/"!==e}(e)))if(s){const t=e.replace(qt,"");s=withTrailingSlash(s)+t}else s=e;return s}function joinRelativeURL(...e){const t=/\/(?!\/)/,s=e.filter(Boolean),a=[];let c=0;for(const e of s)if(e&&"/"!==e)for(const[s,u]of e.split(t).entries())if(u&&"."!==u)if(".."!==u)1===s&&a[a.length-1]?.endsWith(":/")?a[a.length-1]+="/"+u:(a.push(u),c++);else{if(1===a.length&&hasProtocol(a[0]))continue;a.pop(),c--}let u=a.join("/");return c>=0?s[0]?.startsWith("/")&&!u.startsWith("/")?u="/"+u:s[0]?.startsWith("./")&&!u.startsWith("./")&&(u="./"+u):u="../".repeat(-1*c)+u,s[s.length-1]?.endsWith("/")&&!u.endsWith("/")&&(u+="/"),u}const $t=Symbol.for("ufo:protocolRelative");function parseURL(e="",t){const s=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(s){const[,e,t=""]=s;return{protocol:e.toLowerCase(),pathname:t,href:e+t,auth:"",host:"",search:"",hash:""}}if(!hasProtocol(e,{acceptRelative:!0}))return parsePath(e);const[,a="",c,u=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,d="",h=""]=u.match(/([^#/?]*)(.*)?/)||[];"file:"===a&&(h=h.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:f,search:g,hash:m}=parsePath(h);return{protocol:a.toLowerCase(),auth:c?c.slice(0,Math.max(0,c.length-1)):"",host:d,pathname:f,search:g,hash:m,[$t]:!a}}function parsePath(e=""){const[t="",s="",a=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:s,hash:a}}const Ut=0,Lt=1,zt=2;function createRouter$1(e={}){const t={options:e,rootNode:createRadixNode(),staticRoutesMap:{}},normalizeTrailingSlash=t=>e.strictTrailingSlash?t:t.replace(/\/$/,"")||"/";if(e.routes)for(const s in e.routes)insert(t,normalizeTrailingSlash(s),e.routes[s]);return{ctx:t,lookup:e=>function(e,t){const s=e.staticRoutesMap[t];if(s)return s.data;const a=t.split("/"),c={};let u=!1,d=null,h=e.rootNode,f=null;for(let e=0;e<a.length;e++){const t=a[e];null!==h.wildcardChildNode&&(d=h.wildcardChildNode,f=a.slice(e).join("/"));const s=h.children.get(t);if(void 0===s){if(h&&h.placeholderChildren.length>1){const t=a.length-e;h=h.placeholderChildren.find(e=>e.maxDepth===t)||null}else h=h.placeholderChildren[0]||null;if(!h)break;h.paramName&&(c[h.paramName]=t),u=!0}else h=s}null!==h&&null!==h.data||null===d||(h=d,c[h.paramName||"_"]=f,u=!0);if(!h)return null;if(u)return{...h.data,params:u?c:void 0};return h.data}(t,normalizeTrailingSlash(e)),insert:(e,s)=>insert(t,normalizeTrailingSlash(e),s),remove:e=>function(e,t){let s=!1;const a=t.split("/");let c=e.rootNode;for(const e of a)if(c=c.children.get(e),!c)return s;if(c.data){const e=a.at(-1)||"";c.data=null,0===Object.keys(c.children).length&&c.parent&&(c.parent.children.delete(e),c.parent.wildcardChildNode=null,c.parent.placeholderChildren=[]),s=!0}return s}(t,normalizeTrailingSlash(e))}}function insert(e,t,s){let a=!0;const c=t.split("/");let u=e.rootNode,d=0;const h=[u];for(const e of c){let t;if(t=u.children.get(e))u=t;else{const s=getNodeType(e);t=createRadixNode({type:s,parent:u}),u.children.set(e,t),s===zt?(t.paramName="*"===e?"_"+d++:e.slice(1),u.placeholderChildren.push(t),a=!1):s===Lt&&(u.wildcardChildNode=t,t.paramName=e.slice(3)||"_",a=!1),h.push(t),u=t}}for(const[e,t]of h.entries())t.maxDepth=Math.max(h.length-e,t.maxDepth||0);return u.data=s,!0===a&&(e.staticRoutesMap[t]=u),u}function createRadixNode(e={}){return{type:e.type||Ut,maxDepth:0,parent:e.parent||null,children:new Map,data:e.data||null,paramName:e.paramName||null,wildcardChildNode:null,placeholderChildren:[]}}function getNodeType(e){return e.startsWith("**")?Lt:":"===e[0]||"*"===e?zt:Ut}function toRouteMatcher(e){return function(e,t){return{ctx:{table:e},matchAll:s=>_matchRoutes(s,e,t)}}(_routerNodeToTable("",e.ctx.rootNode),e.ctx.options.strictTrailingSlash)}function _matchRoutes(e,t,s){!0!==s&&e.endsWith("/")&&(e=e.slice(0,-1)||"/");const a=[];for(const[s,c]of _sortRoutesMap(t.wildcard))(e===s||e.startsWith(s+"/"))&&a.push(c);for(const[s,c]of _sortRoutesMap(t.dynamic))if(e.startsWith(s+"/")){const t="/"+e.slice(s.length).split("/").splice(2).join("/");a.push(..._matchRoutes(t,c))}const c=t.static.get(e);return c&&a.push(c),a.filter(Boolean)}function _sortRoutesMap(e){return[...e.entries()].sort((e,t)=>e[0].length-t[0].length)}function _routerNodeToTable(e,t){const s={static:new Map,wildcard:new Map,dynamic:new Map};return function _addNode(e,t){if(e)if(t.type!==Ut||e.includes("*")||e.includes(":")){if(t.type===Lt)s.wildcard.set(e.replace("/**",""),t.data);else if(t.type===zt){const a=_routerNodeToTable("",t);return t.data&&a.static.set("/",t.data),void s.dynamic.set(e.replace(/\/\*|\/:\w+/,""),a)}}else t.data&&s.static.set(e,t.data);for(const[s,a]of t.children.entries())_addNode(`${e}/${s}`.replace("//","/"),a)}(e,t),s}function isPlainObject(e){if(null===e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&(!(Symbol.iterator in e)&&(!(Symbol.toStringTag in e)||"[object Module]"===Object.prototype.toString.call(e)))}function _defu(e,t,s=".",a){if(!isPlainObject(t))return _defu(e,{},s,a);const c=Object.assign({},t);for(const t in e){if("__proto__"===t||"constructor"===t)continue;const u=e[t];null!=u&&(a&&a(c,t,u,s)||(Array.isArray(u)&&Array.isArray(c[t])?c[t]=[...u,...c[t]]:isPlainObject(u)&&isPlainObject(c[t])?c[t]=_defu(u,c[t],(s?`${s}.`:"")+t.toString(),a):c[t]=u))}return c}function createDefu(e){return(...t)=>t.reduce((t,s)=>_defu(t,s,"",e),{})}const Kt=createDefu(),Wt=createDefu((e,t,s)=>{if(void 0!==e[t]&&"function"==typeof s)return e[t]=s(e[t]),!0});function o(e){throw new Error(`${e} is not implemented yet!`)}class i extends a{__unenv__={};readableEncoding=null;readableEnded=!0;readableFlowing=!1;readableHighWaterMark=0;readableLength=0;readableObjectMode=!1;readableAborted=!1;readableDidRead=!1;closed=!1;errored=null;readable=!1;destroyed=!1;static from(e,t){return new i(t)}constructor(e){super()}_read(e){}read(e){}setEncoding(e){return this}pause(){return this}resume(){return this}isPaused(){return!0}unpipe(e){return this}unshift(e,t){}wrap(e){return this}push(e,t){return!1}_destroy(e,t){this.removeAllListeners()}destroy(e){return this.destroyed=!0,this._destroy(e),this}pipe(e,t){return{}}compose(e,t){throw new Error("Method not implemented.")}[Symbol.asyncDispose](){return this.destroy(),Promise.resolve()}async*[Symbol.asyncIterator](){throw o("Readable.asyncIterator")}iterator(e){throw o("Readable.iterator")}map(e,t){throw o("Readable.map")}filter(e,t){throw o("Readable.filter")}forEach(e,t){throw o("Readable.forEach")}reduce(e,t,s){throw o("Readable.reduce")}find(e,t){throw o("Readable.find")}findIndex(e,t){throw o("Readable.findIndex")}some(e,t){throw o("Readable.some")}toArray(e){throw o("Readable.toArray")}every(e,t){throw o("Readable.every")}flatMap(e,t){throw o("Readable.flatMap")}drop(e,t){throw o("Readable.drop")}take(e,t){throw o("Readable.take")}asIndexedPairs(e){throw o("Readable.asIndexedPairs")}}let Dt=class extends a{__unenv__={};writable=!0;writableEnded=!1;writableFinished=!1;writableHighWaterMark=0;writableLength=0;writableObjectMode=!1;writableCorked=0;closed=!1;errored=null;writableNeedDrain=!1;writableAborted=!1;destroyed=!1;_data;_encoding="utf8";constructor(e){super()}pipe(e,t){return{}}_write(t,s,a){if(this.writableEnded)a&&a();else{if(void 0===this._data)this._data=t;else{const a="string"==typeof this._data?e.from(this._data,this._encoding||s||"utf8"):this._data,c="string"==typeof t?e.from(t,s||this._encoding||"utf8"):t;this._data=e.concat([a,c])}this._encoding=s,a&&a()}}_writev(e,t){}_destroy(e,t){}_final(e){}write(e,t,s){const a="string"==typeof t?this._encoding:"utf8",c="function"==typeof t?t:"function"==typeof s?s:void 0;return this._write(e,a,c),!0}setDefaultEncoding(e){return this}end(e,t,s){const a="function"==typeof e?e:"function"==typeof t?t:"function"==typeof s?s:void 0;if(this.writableEnded)return a&&a(),this;const c=e===a?void 0:e;if(c){const e=t===a?void 0:t;this.write(c,e,a)}return this.writableEnded=!0,this.writableFinished=!0,this.emit("close"),this.emit("finish"),this}cork(){}uncork(){}destroy(e){return this.destroyed=!0,delete this._data,this.removeAllListeners(),this}compose(e,t){throw new Error("Method not implemented.")}[Symbol.asyncDispose](){return Promise.resolve()}};const Ft=class{allowHalfOpen=!0;_destroy;constructor(e=new i,t=new Dt){Object.assign(this,e),Object.assign(this,t),this._destroy=function(...e){return function(...t){for(const s of e)s(...t)}}(e._destroy,t._destroy)}};const Qt=(Object.assign(Ft.prototype,i.prototype),Object.assign(Ft.prototype,Dt.prototype),Ft);class A extends Qt{__unenv__={};bufferSize=0;bytesRead=0;bytesWritten=0;connecting=!1;destroyed=!1;pending=!1;localAddress="";localPort=0;remoteAddress="";remoteFamily="";remotePort=0;autoSelectFamilyAttemptedAddresses=[];readyState="readOnly";constructor(e){super()}write(e,t,s){return!1}connect(e,t,s){return this}end(e,t,s){return this}setEncoding(e){return this}pause(){return this}resume(){return this}setTimeout(e,t){return this}setNoDelay(e){return this}setKeepAlive(e,t){return this}address(){return{}}unref(){return this}ref(){return this}destroySoon(){this.destroy()}resetAndDestroy(){const e=new Error("ERR_SOCKET_CLOSED");return e.code="ERR_SOCKET_CLOSED",this.destroy(e),this}}class y extends i{aborted=!1;httpVersion="1.1";httpVersionMajor=1;httpVersionMinor=1;complete=!0;connection;socket;headers={};trailers={};method="GET";url="/";statusCode=200;statusMessage="";closed=!1;errored=null;readable=!1;constructor(e){super(),this.socket=this.connection=e||new A}get rawHeaders(){const e=this.headers,t=[];for(const s in e)if(Array.isArray(e[s]))for(const a of e[s])t.push(s,a);else t.push(s,e[s]);return t}get rawTrailers(){return[]}setTimeout(e,t){return this}get headersDistinct(){return p(this.headers)}get trailersDistinct(){return p(this.trailers)}}function p(e){const t={};for(const[s,a]of Object.entries(e))s&&(t[s]=(Array.isArray(a)?a:[a]).filter(Boolean));return t}class w extends Dt{statusCode=200;statusMessage="";upgrading=!1;chunkedEncoding=!1;shouldKeepAlive=!1;useChunkedEncodingByDefault=!1;sendDate=!1;finished=!1;headersSent=!1;strictContentLength=!1;connection=null;socket=null;req;_headers={};constructor(e){super(),this.req=e}assignSocket(e){e._httpMessage=this,this.socket=e,this.connection=e,this.emit("socket",e),this._flush()}_flush(){this.flushHeaders()}detachSocket(e){}writeContinue(e){}writeHead(e,t,s){e&&(this.statusCode=e),"string"==typeof t&&(this.statusMessage=t,t=void 0);const a=s||t;if(a&&!Array.isArray(a))for(const e in a)this.setHeader(e,a[e]);return this.headersSent=!0,this}writeProcessing(){}setTimeout(e,t){return this}appendHeader(e,t){e=e.toLowerCase();const s=this._headers[e],a=[...Array.isArray(s)?s:[s],...Array.isArray(t)?t:[t]].filter(Boolean);return this._headers[e]=a.length>1?a:a[0],this}setHeader(e,t){return this._headers[e.toLowerCase()]=t,this}setHeaders(e){for(const[t,s]of Object.entries(e))this.setHeader(t,s);return this}getHeader(e){return this._headers[e.toLowerCase()]}getHeaders(){return this._headers}getHeaderNames(){return Object.keys(this._headers)}hasHeader(e){return e.toLowerCase()in this._headers}removeHeader(e){delete this._headers[e.toLowerCase()]}addTrailers(e){}flushHeaders(){}writeEarlyHints(e,t){"function"==typeof t&&t()}}const Vt=(()=>{const n=function(){};return n.prototype=Object.create(null),n})();function v(e={}){if(e instanceof Headers)return e;const t=new Headers;for(const[s,a]of Object.entries(e))if(void 0!==a){if(Array.isArray(a)){for(const e of a)t.append(s,String(e));continue}t.set(s,String(a))}return t}const Zt=new Set([101,204,205,304]);async function b(e,t){const s=new y,a=new w(s);let c;if(s.url=t.url?.toString()||"/",!s.url.startsWith("/")){const e=new URL(s.url);c=e.host,s.url=e.pathname+e.search+e.hash}s.method=t.method||"GET",s.headers=function(e={}){const t=new Vt,s=Array.isArray(e)||function(e){return"function"==typeof e?.entries}(e)?e:Object.entries(e);for(const[e,a]of s)if(a){if(void 0===t[e]){t[e]=a;continue}t[e]=[...Array.isArray(t[e])?t[e]:[t[e]],...Array.isArray(a)?a:[a]]}return t}(t.headers||{}),s.headers.host||(s.headers.host=t.host||c||"localhost"),s.connection.encrypted=s.connection.encrypted||"https"===t.protocol,s.body=t.body||null,s.__unenv__=t.context,await e(s,a);let u=a._data;(Zt.has(a.statusCode)||"HEAD"===s.method.toUpperCase())&&(u=null,delete a._headers["content-length"]);const d={status:a.statusCode,statusText:a.statusMessage,headers:a._headers,body:u};return s.destroy(),a.destroy(),d}function hasProp(e,t){try{return t in e}catch{return!1}}class H3Error extends Error{static __h3_error__=!0;statusCode=500;fatal=!1;unhandled=!1;statusMessage;data;cause;constructor(e,t={}){super(e,t),t.cause&&!this.cause&&(this.cause=t.cause)}toJSON(){const e={message:this.message,statusCode:sanitizeStatusCode(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=sanitizeStatusMessage(this.statusMessage)),void 0!==this.data&&(e.data=this.data),e}}function createError$1(e){if("string"==typeof e)return new H3Error(e);if(isError(e))return e;const t=new H3Error(e.message??e.statusMessage??"",{cause:e.cause||e});if(hasProp(e,"stack"))try{Object.defineProperty(t,"stack",{get:()=>e.stack})}catch{try{t.stack=e.stack}catch{}}if(e.data&&(t.data=e.data),e.statusCode?t.statusCode=sanitizeStatusCode(e.statusCode,t.statusCode):e.status&&(t.statusCode=sanitizeStatusCode(e.status,t.statusCode)),e.statusMessage?t.statusMessage=e.statusMessage:e.statusText&&(t.statusMessage=e.statusText),t.statusMessage){const e=t.statusMessage;sanitizeStatusMessage(t.statusMessage)!==e&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return void 0!==e.fatal&&(t.fatal=e.fatal),void 0!==e.unhandled&&(t.unhandled=e.unhandled),t}function isError(e){return!0===e?.constructor?.__h3_error__}function getQuery(e){return getQuery$1(e.path||"")}function getRequestHeaders(e){const t={};for(const s in e.node.req.headers){const a=e.node.req.headers[s];t[s]=Array.isArray(a)?a.filter(Boolean).join(", "):a}return t}const Jt=Symbol.for("h3RawBody"),Gt=["PATCH","POST","PUT","DELETE"];function readRawBody(t,s="utf8"){!function(e,t){if(!function(e,t){if("string"==typeof t){if(e.method===t)return!0}else if(t.includes(e.method))return!0;return!1}(e,t))throw createError$1({statusCode:405,statusMessage:"HTTP method is not allowed."})}(t,Gt);const a=t._requestBody||t.web?.request?.body||t.node.req[Jt]||t.node.req.rawBody||t.node.req.body;if(a){const t=Promise.resolve(a).then(t=>e.isBuffer(t)?t:"function"==typeof t.pipeTo?new Promise((s,a)=>{const c=[];t.pipeTo(new WritableStream({write(e){c.push(e)},close(){s(e.concat(c))},abort(e){a(e)}})).catch(a)}):"function"==typeof t.pipe?new Promise((s,a)=>{const c=[];t.on("data",e=>{c.push(e)}).on("end",()=>{s(e.concat(c))}).on("error",a)}):t.constructor===Object?e.from(JSON.stringify(t)):t instanceof URLSearchParams?e.from(t.toString()):t instanceof FormData?new Response(t).bytes().then(t=>e.from(t)):e.from(t));return s?t.then(e=>e.toString(s)):t}if(!Number.parseInt(t.node.req.headers["content-length"]||"")&&!/\bchunked\b/i.test(String(t.node.req.headers["transfer-encoding"]??"")))return Promise.resolve(void 0);const c=t.node.req[Jt]=new Promise((s,a)=>{const c=[];t.node.req.on("error",e=>{a(e)}).on("data",e=>{c.push(e)}).on("end",()=>{s(e.concat(c))})});return s?c.then(e=>e.toString(s)):c}function handleCacheHeaders(e,t){const s=["public",...t.cacheControls||[]];let a=!1;if(void 0!==t.maxAge&&s.push("max-age="+ +t.maxAge,"s-maxage="+ +t.maxAge),t.modifiedTime){const s=new Date(t.modifiedTime),c=e.node.req.headers["if-modified-since"];e.node.res.setHeader("last-modified",s.toUTCString()),c&&new Date(c)>=s&&(a=!0)}if(t.etag){e.node.res.setHeader("etag",t.etag);e.node.req.headers["if-none-match"]===t.etag&&(a=!0)}return e.node.res.setHeader("cache-control",s.join(", ")),!!a&&(e.node.res.statusCode=304,e.handled||e.node.res.end(),!0)}const Xt={html:"text/html",json:"application/json"},Yt=/[^\u0009\u0020-\u007E]/g;function sanitizeStatusMessage(e=""){return e.replace(Yt,"")}function sanitizeStatusCode(e,t=200){return e?("string"==typeof e&&(e=Number.parseInt(e,10)),e<100||e>999?t:e):t}function splitCookiesString(e){if(Array.isArray(e))return e.flatMap(e=>splitCookiesString(e));if("string"!=typeof e)return[];const t=[];let s,a,c,u,d,h=0;const skipWhitespace=()=>{for(;h<e.length&&/\s/.test(e.charAt(h));)h+=1;return h<e.length},notSpecialChar=()=>(a=e.charAt(h),"="!==a&&";"!==a&&","!==a);for(;h<e.length;){for(s=h,d=!1;skipWhitespace();)if(a=e.charAt(h),","===a){for(c=h,h+=1,skipWhitespace(),u=h;h<e.length&&notSpecialChar();)h+=1;h<e.length&&"="===e.charAt(h)?(d=!0,h=u,t.push(e.slice(s,c)),s=h):h=c+1}else h+=1;(!d||h>=e.length)&&t.push(e.slice(s))}return t}const er=void 0===c?e=>e():c;function send(e,t,s){return s&&function(e,t){t&&304!==e.node.res.statusCode&&!e.node.res.getHeader("content-type")&&e.node.res.setHeader("content-type",t)}(e,s),new Promise(s=>{er(()=>{e.handled||e.node.res.end(t),s()})})}function setResponseStatus(e,t,s){t&&(e.node.res.statusCode=sanitizeStatusCode(t,e.node.res.statusCode)),s&&(e.node.res.statusMessage=sanitizeStatusMessage(s))}function getResponseStatus(e){return e.node.res.statusCode}function getResponseStatusText(e){return e.node.res.statusMessage}function setResponseHeaders(e,t){for(const[s,a]of Object.entries(t))e.node.res.setHeader(s,a)}const tr=setResponseHeaders;function setResponseHeader(e,t,s){e.node.res.setHeader(t,s)}function appendResponseHeader(e,t,s){let a=e.node.res.getHeader(t);a?(Array.isArray(a)||(a=[a.toString()]),e.node.res.setHeader(t,[...a,s])):e.node.res.setHeader(t,s)}function sendStream(e,t){if(!t||"object"!=typeof t)throw new Error("[h3] Invalid stream provided.");if(e.node.res._data=t,!e.node.res.socket)return e._handled=!0,Promise.resolve();if(hasProp(t,"pipeTo")&&"function"==typeof t.pipeTo)return t.pipeTo(new WritableStream({write(t){e.node.res.write(t)}})).then(()=>{e.node.res.end()});if(hasProp(t,"pipe")&&"function"==typeof t.pipe)return new Promise((s,a)=>{t.pipe(e.node.res),t.on&&(t.on("end",()=>{e.node.res.end(),s()}),t.on("error",e=>{a(e)})),e.node.res.on("close",()=>{t.abort&&t.abort()})});throw new Error("[h3] Invalid or incompatible stream provided.")}function sendWebResponse(e,t){for(const[s,a]of t.headers)"set-cookie"===s?e.node.res.appendHeader(s,splitCookiesString(a)):e.node.res.setHeader(s,a);if(t.status&&(e.node.res.statusCode=sanitizeStatusCode(t.status,e.node.res.statusCode)),t.statusText&&(e.node.res.statusMessage=sanitizeStatusMessage(t.statusText)),t.redirected&&e.node.res.setHeader("location",t.url),t.body)return sendStream(e,t.body);e.node.res.end()}const rr=new Set(["PATCH","POST","PUT","DELETE"]),nr=new Set(["transfer-encoding","accept-encoding","connection","keep-alive","upgrade","expect","host","accept"]);async function proxyRequest(e,t,s={}){let a,c;rr.has(e.method)&&(s.streamRequest?(a=function(e){if(!Gt.includes(e.method))return;const t=e.web?.request?.body||e._requestBody;return t||(Jt in e.node.req||"rawBody"in e.node.req||"body"in e.node.req||"__unenv__"in e.node.req?new ReadableStream({async start(t){const s=await readRawBody(e,!1);s&&t.enqueue(s),t.close()}}):new ReadableStream({start:t=>{e.node.req.on("data",e=>{t.enqueue(e)}),e.node.req.on("end",()=>{t.close()}),e.node.req.on("error",e=>{t.error(e)})}}))}(e),c="half"):a=await readRawBody(e,!1).catch(()=>{}));const u=s.fetchOptions?.method||e.method,d=function(e,...t){const s=t.filter(Boolean);if(0===s.length)return e;const a=new Headers(e);for(const e of s){const t=Array.isArray(e)?e:"function"==typeof e.entries?e.entries():Object.entries(e);for(const[e,s]of t)void 0!==s&&a.set(e,s)}return a}(getProxyRequestHeaders(e,{host:t.startsWith("/")}),s.fetchOptions?.headers,s.headers);return async function(e,t,s={}){let a;try{a=await _getFetch(s.fetch)(t,{headers:s.headers,ignoreResponseError:!0,...s.fetchOptions})}catch(e){throw createError$1({status:502,statusMessage:"Bad Gateway",cause:e})}e.node.res.statusCode=sanitizeStatusCode(a.status,e.node.res.statusCode),e.node.res.statusMessage=sanitizeStatusMessage(a.statusText);const c=[];for(const[t,s]of a.headers.entries())"content-encoding"!==t&&"content-length"!==t&&("set-cookie"!==t?e.node.res.setHeader(t,s):c.push(...splitCookiesString(s)));c.length>0&&e.node.res.setHeader("set-cookie",c.map(e=>(s.cookieDomainRewrite&&(e=rewriteCookieProperty(e,s.cookieDomainRewrite,"domain")),s.cookiePathRewrite&&(e=rewriteCookieProperty(e,s.cookiePathRewrite,"path")),e)));s.onResponse&&await s.onResponse(e,a);if(void 0!==a._data)return a._data;if(e.handled)return;if(!1===s.sendStream){const t=new Uint8Array(await a.arrayBuffer());return e.node.res.end(t)}if(a.body)for await(const t of a.body)e.node.res.write(t);return e.node.res.end()}(e,t,{...s,fetchOptions:{method:u,body:a,duplex:c,...s.fetchOptions,headers:d}})}function getProxyRequestHeaders(e,t){const s=Object.create(null),a=getRequestHeaders(e);for(const e in a)(!nr.has(e)||"host"===e&&t?.host)&&(s[e]=a[e]);return s}function fetchWithEvent(e,t,s,a){return _getFetch(a?.fetch)(t,{...s,context:s?.context||e.context,headers:{...getProxyRequestHeaders(e,{host:"string"==typeof t&&t.startsWith("/")}),...s?.headers}})}function _getFetch(e){if(e)return e;if(globalThis.fetch)return globalThis.fetch;throw new Error("fetch is not available. Try importing `node-fetch-native/polyfill` for Node.js.")}function rewriteCookieProperty(e,t,s){const a="string"==typeof t?{"*":t}:t;return e.replace(new RegExp(`(;\\s*${s}=)([^;]+)`,"gi"),(e,t,s)=>{let c;if(s in a)c=a[s];else{if(!("*"in a))return e;c=a["*"]}return c?t+c:""})}class H3Event{__is_event__=!0;node;web;context={};_method;_path;_headers;_requestBody;_handled=!1;_onBeforeResponseCalled;_onAfterResponseCalled;constructor(e,t){this.node={req:e,res:t}}get method(){return this._method||(this._method=(this.node.req.method||"GET").toUpperCase()),this._method}get path(){return this._path||this.node.req.url||"/"}get headers(){return this._headers||(this._headers=function(e){const t=new Headers;for(const[s,a]of Object.entries(e))if(Array.isArray(a))for(const e of a)t.append(s,e);else a&&t.set(s,a);return t}(this.node.req.headers)),this._headers}get handled(){return this._handled||this.node.res.writableEnded||this.node.res.headersSent}respondWith(e){return Promise.resolve(e).then(e=>sendWebResponse(this,e))}toString(){return`[${this.method}] ${this.path}`}toJSON(){return this.toString()}get req(){return this.node.req}get res(){return this.node.res}}function isEvent(e){return hasProp(e,"__is_event__")}function createEvent(e,t){return new H3Event(e,t)}function defineEventHandler(e){if("function"==typeof e)return e.__is_handler__=!0,e;const t={onRequest:_normalizeArray(e.onRequest),onBeforeResponse:_normalizeArray(e.onBeforeResponse)},_handler=s=>async function(e,t,s){if(s.onRequest)for(const t of s.onRequest)if(await t(e),e.handled)return;const a=await t(e),c={body:a};if(s.onBeforeResponse)for(const t of s.onBeforeResponse)await t(e,c);return c.body}(s,e.handler,t);return _handler.__is_handler__=!0,_handler.__resolve__=e.handler.__resolve__,_handler.__websocket__=e.websocket,_handler}function _normalizeArray(e){return e?Array.isArray(e)?e:[e]:void 0}const or=defineEventHandler;function isEventHandler(e){return hasProp(e,"__is_handler__")}function toEventHandler(e,t,s){return isEventHandler(e)||console.warn("[h3] Implicit event handler conversion is deprecated. Use `eventHandler()` or `fromNodeMiddleware()` to define event handlers.",s&&"/"!==s?`\n     Route: ${s}`:"",`\n     Handler: ${e}`),e}const lazyEventHandler=function(e){let t,s;const resolveHandler=()=>s?Promise.resolve(s):(t||(t=Promise.resolve(e()).then(e=>{const t=e.default||e;if("function"!=typeof t)throw new TypeError("Invalid lazy handler result. It should be a function:",t);return s={handler:toEventHandler(e.default||e)},s})),t),a=or(e=>s?s.handler(e):resolveHandler().then(t=>t.handler(e)));return a.__resolve__=resolveHandler,a};function createApp(e={}){const t=[],s=function(e,t){const s=t.debug?2:void 0;return or(async a=>{a.node.req.originalUrl=a.node.req.originalUrl||a.node.req.url||"/";const c=a._path||a.node.req.url||"/";let u;t.onRequest&&await t.onRequest(a);for(const d of e){if(d.route.length>1){if(!c.startsWith(d.route))continue;u=c.slice(d.route.length)||"/"}else u=c;if(d.match&&!d.match(u,a))continue;a._path=u,a.node.req.url=u;const e=await d.handler(a),h=void 0===e?void 0:await e;if(void 0!==h){const e={body:h};return t.onBeforeResponse&&(a._onBeforeResponseCalled=!0,await t.onBeforeResponse(a,e)),await handleHandlerResponse(a,e.body,s),void(t.onAfterResponse&&(a._onAfterResponseCalled=!0,await t.onAfterResponse(a,e)))}if(a.handled)return void(t.onAfterResponse&&(a._onAfterResponseCalled=!0,await t.onAfterResponse(a,void 0)))}if(!a.handled)throw createError$1({statusCode:404,statusMessage:`Cannot find any path matching ${a.path||"/"}.`});t.onAfterResponse&&(a._onAfterResponseCalled=!0,await t.onAfterResponse(a,void 0))})}(t,e),a=function(e){return async t=>{let s;for(const a of e){if("/"===a.route&&!a.handler.__resolve__)continue;if(!t.startsWith(a.route))continue;if(s=t.slice(a.route.length)||"/",a.match&&!a.match(s,void 0))continue;let e={route:a.route,handler:a.handler};if(e.handler.__resolve__){const t=await e.handler.__resolve__(s);if(!t)continue;e={...e,...t,route:joinURL(e.route||"/",t.route||"/")}}return e}}}(t);s.__resolve__=a;const c=function(e){let t;return()=>(t||(t=e()),t)}(()=>{return t=a,{...e.websocket,async resolve(e){const s=e.request?.url||e.url||"/",{pathname:a}="string"==typeof s?parseURL(s):s,c=await t(a);return c?.handler?.__websocket__||{}}};var t}),u={use:(e,t,s)=>use(u,e,t,s),resolve:a,handler:s,stack:t,options:e,get websocket(){return c()}};return u}function use(e,t,s,a){if(Array.isArray(t))for(const c of t)use(e,c,s,a);else if(Array.isArray(s))for(const c of s)use(e,t,c,a);else"string"==typeof t?e.stack.push(normalizeLayer({...a,route:t,handler:s})):"function"==typeof t?e.stack.push(normalizeLayer({...s,handler:t})):e.stack.push(normalizeLayer({...t}));return e}function normalizeLayer(e){let t=e.handler;return t.handler&&(t=t.handler),e.lazy?t=lazyEventHandler(t):isEventHandler(t)||(t=toEventHandler(t,0,e.route)),{route:withoutTrailingSlash(e.route),match:e.match,handler:t}}function handleHandlerResponse(t,s,a){if(null===s)return function(e,t){if(e.handled)return;t||200===e.node.res.statusCode||(t=e.node.res.statusCode);const s=sanitizeStatusCode(t,204);204===s&&e.node.res.removeHeader("content-length"),e.node.res.writeHead(s),e.node.res.end()}(t);if(s){if(c=s,"undefined"!=typeof Response&&c instanceof Response)return sendWebResponse(t,s);if(function(e){if(!e||"object"!=typeof e)return!1;if("function"==typeof e.pipe){if("function"==typeof e._read)return!0;if("function"==typeof e.abort)return!0}return"function"==typeof e.pipeTo}(s))return sendStream(t,s);if(s.buffer)return send(t,s);if(s.arrayBuffer&&"function"==typeof s.arrayBuffer)return s.arrayBuffer().then(a=>send(t,e.from(a),s.type));if(s instanceof Error)throw createError$1(s);if("function"==typeof s.end)return!0}var c;const u=typeof s;if("string"===u)return send(t,s,Xt.html);if("object"===u||"boolean"===u||"number"===u)return send(t,JSON.stringify(s,void 0,a),Xt.json);if("bigint"===u)return send(t,s.toString(),Xt.json);throw createError$1({statusCode:500,statusMessage:`[h3] Cannot send ${u} as response.`})}const sr=["connect","delete","get","head","options","post","put","trace","patch"];function toNodeListener(e){return async function(t,s){const a=createEvent(t,s);try{await e.handler(a)}catch(t){const s=createError$1(t);if(isError(t)||(s.unhandled=!0),setResponseStatus(a,s.statusCode,s.statusMessage),e.options.onError&&await e.options.onError(s,a),a.handled)return;(s.unhandled||s.fatal)&&console.error("[h3]",s.fatal?"[fatal]":"[unhandled]",s),e.options.onBeforeResponse&&!a._onBeforeResponseCalled&&await e.options.onBeforeResponse(a,{body:s}),await function(e,t,s){if(e.handled)return;const a=isError(t)?t:createError$1(t),c={statusCode:a.statusCode,statusMessage:a.statusMessage,stack:[],data:a.data};if(s&&(c.stack=(a.stack||"").split("\n").map(e=>e.trim())),e.handled)return;setResponseStatus(e,Number.parseInt(a.statusCode),a.statusMessage),e.node.res.setHeader("content-type",Xt.json),e.node.res.end(JSON.stringify(c,void 0,2))}(a,s,!!e.options.debug),e.options.onAfterResponse&&!a._onAfterResponseCalled&&await e.options.onAfterResponse(a,{body:s})}}}function flatHooks(e,t={},s){for(const a in e){const c=e[a],u=s?`${s}:${a}`:a;"object"==typeof c&&null!==c?flatHooks(c,t,u):"function"==typeof c&&(t[u]=c)}return t}const ar={run:e=>e()},ir=void 0!==console.createTask?console.createTask:()=>ar;function serialTaskCaller(e,t){const s=t.shift(),a=ir(s);return e.reduce((e,s)=>e.then(()=>a.run(()=>s(...t))),Promise.resolve())}function parallelTaskCaller(e,t){const s=t.shift(),a=ir(s);return Promise.all(e.map(e=>a.run(()=>e(...t))))}function callEachWith(e,t){for(const s of[...e])s(t)}class Hookable{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,t,s={}){if(!e||"function"!=typeof t)return()=>{};const a=e;let c;for(;this._deprecatedHooks[e];)c=this._deprecatedHooks[e],e=c.to;if(c&&!s.allowDeprecated){let e=c.message;e||(e=`${a} hook has been deprecated`+(c.to?`, please use ${c.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(e)||(console.warn(e),this._deprecatedMessages.add(e))}if(!t.name)try{Object.defineProperty(t,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(t),()=>{t&&(this.removeHook(e,t),t=void 0)}}hookOnce(e,t){let s,_function=(...e)=>("function"==typeof s&&s(),s=void 0,_function=void 0,t(...e));return s=this.hook(e,_function),s}removeHook(e,t){if(this._hooks[e]){const s=this._hooks[e].indexOf(t);-1!==s&&this._hooks[e].splice(s,1),0===this._hooks[e].length&&delete this._hooks[e]}}deprecateHook(e,t){this._deprecatedHooks[e]="string"==typeof t?{to:t}:t;const s=this._hooks[e]||[];delete this._hooks[e];for(const t of s)this.hook(e,t)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const t in e)this.deprecateHook(t,e[t])}addHooks(e){const t=flatHooks(e),s=Object.keys(t).map(e=>this.hook(e,t[e]));return()=>{for(const e of s.splice(0,s.length))e()}}removeHooks(e){const t=flatHooks(e);for(const e in t)this.removeHook(e,t[e])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...t){return t.unshift(e),this.callHookWith(serialTaskCaller,e,...t)}callHookParallel(e,...t){return t.unshift(e),this.callHookWith(parallelTaskCaller,e,...t)}callHookWith(e,t,...s){const a=this._before||this._after?{name:t,args:s,context:{}}:void 0;this._before&&callEachWith(this._before,a);const c=e(t in this._hooks?[...this._hooks[t]]:[],s);return c instanceof Promise?c.finally(()=>{this._after&&a&&callEachWith(this._after,a)}):(this._after&&a&&callEachWith(this._after,a),c)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(void 0!==this._before){const t=this._before.indexOf(e);-1!==t&&this._before.splice(t,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(void 0!==this._after){const t=this._after.indexOf(e);-1!==t&&this._after.splice(t,1)}}}}const cr=globalThis;class FetchError extends Error{constructor(e,t){super(e,t),this.name="FetchError",t?.cause&&!this.cause&&(this.cause=t.cause)}}const ur=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function isPayloadMethod(e="GET"){return ur.has(e.toUpperCase())}const dr=new Set(["image/svg","application/xml","application/xhtml","application/html"]),lr=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function resolveFetchOptions(e,t,s,a){const c=function(e,t,s){if(!t)return new s(e);const a=new s(t);if(e)for(const[t,c]of Symbol.iterator in e||Array.isArray(e)?e:new s(e))a.set(t,c);return a}(t?.headers??e?.headers,s?.headers,a);let u;return(s?.query||s?.params||t?.params||t?.query)&&(u={...s?.params,...s?.query,...t?.params,...t?.query}),{...s,...t,query:u,params:u,headers:c}}async function callHooks(e,t){if(t)if(Array.isArray(t))for(const s of t)await s(e);else await t(e)}const hr=new Set([408,409,425,429,500,502,503,504]),fr=new Set([101,204,205,304]);function createFetch(e={}){const{fetch:t=globalThis.fetch,Headers:s=globalThis.Headers,AbortController:a=globalThis.AbortController}=e;async function onError(e){const t=e.error&&"AbortError"===e.error.name&&!e.options.timeout||!1;if(!1!==e.options.retry&&!t){let t;t="number"==typeof e.options.retry?e.options.retry:isPayloadMethod(e.options.method)?0:1;const s=e.response&&e.response.status||500;if(t>0&&(Array.isArray(e.options.retryStatusCodes)?e.options.retryStatusCodes.includes(s):hr.has(s))){const s="function"==typeof e.options.retryDelay?e.options.retryDelay(e):e.options.retryDelay||0;return s>0&&await new Promise(e=>setTimeout(e,s)),$fetchRaw(e.request,{...e.options,retry:t-1})}}const s=function(e){const t=e.error?.message||e.error?.toString()||"",s=e.request?.method||e.options?.method||"GET",a=e.request?.url||String(e.request)||"/",c=`[${s}] ${JSON.stringify(a)}`,u=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",d=new FetchError(`${c}: ${u}${t?` ${t}`:""}`,e.error?{cause:e.error}:void 0);for(const t of["request","options","response"])Object.defineProperty(d,t,{get:()=>e[t]});for(const[t,s]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(d,t,{get:()=>e.response&&e.response[s]});return d}(e);throw Error.captureStackTrace&&Error.captureStackTrace(s,$fetchRaw),s}const $fetchRaw=async function(c,u={}){const d={request:c,options:resolveFetchOptions(c,u,e.defaults,s),response:void 0,error:void 0};if(d.options.method&&(d.options.method=d.options.method.toUpperCase()),d.options.onRequest&&(await callHooks(d,d.options.onRequest),d.options.headers instanceof s||(d.options.headers=new s(d.options.headers||{}))),"string"==typeof d.request&&(d.options.baseURL&&(d.request=function(e,t){if(isEmptyURL(t)||hasProtocol(e))return e;const s=withoutTrailingSlash(t);if(e.startsWith(s)){const t=e[s.length];if(!t||"/"===t||"?"===t)return e}return joinURL(s,e)}(d.request,d.options.baseURL)),d.options.query&&(d.request=withQuery(d.request,d.options.query),delete d.options.query),"query"in d.options&&delete d.options.query,"params"in d.options&&delete d.options.params),d.options.body&&isPayloadMethod(d.options.method))if(function(e){if(void 0===e)return!1;const t=typeof e;return"string"===t||"number"===t||"boolean"===t||null===t||"object"===t&&(!!Array.isArray(e)||!e.buffer&&!(e instanceof FormData||e instanceof URLSearchParams)&&(e.constructor&&"Object"===e.constructor.name||"function"==typeof e.toJSON))}(d.options.body)){const e=d.options.headers.get("content-type");"string"!=typeof d.options.body&&(d.options.body="application/x-www-form-urlencoded"===e?new URLSearchParams(d.options.body).toString():JSON.stringify(d.options.body)),e||d.options.headers.set("content-type","application/json"),d.options.headers.has("accept")||d.options.headers.set("accept","application/json")}else("pipeTo"in d.options.body&&"function"==typeof d.options.body.pipeTo||"function"==typeof d.options.body.pipe)&&("duplex"in d.options||(d.options.duplex="half"));let h;if(!d.options.signal&&d.options.timeout){const e=new a;h=setTimeout(()=>{const t=new Error("[TimeoutError]: The operation was aborted due to timeout");t.name="TimeoutError",t.code=23,e.abort(t)},d.options.timeout),d.options.signal=e.signal}try{d.response=await t(d.request,d.options)}catch(e){return d.error=e,d.options.onRequestError&&await callHooks(d,d.options.onRequestError),await onError(d)}finally{h&&clearTimeout(h)}if((d.response.body||d.response._bodyInit)&&!fr.has(d.response.status)&&"HEAD"!==d.options.method){const e=(d.options.parseResponse?"json":d.options.responseType)||function(e=""){if(!e)return"json";const t=e.split(";").shift()||"";return lr.test(t)?"json":"text/event-stream"===t?"stream":dr.has(t)||t.startsWith("text/")?"text":"blob"}(d.response.headers.get("content-type")||"");switch(e){case"json":{const e=await d.response.text(),t=d.options.parseResponse||destr;d.response._data=t(e);break}case"stream":d.response._data=d.response.body||d.response._bodyInit;break;default:d.response._data=await d.response[e]()}}return d.options.onResponse&&await callHooks(d,d.options.onResponse),!d.options.ignoreResponseError&&d.response.status>=400&&d.response.status<600?(d.options.onResponseError&&await callHooks(d,d.options.onResponseError),await onError(d)):d.response},$fetch=async function(e,t){return(await $fetchRaw(e,t))._data};return $fetch.raw=$fetchRaw,$fetch.native=(...e)=>t(...e),$fetch.create=(t={},s={})=>createFetch({...e,...s,defaults:{...e.defaults,...s.defaults,...t}}),$fetch}const pr=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if(void 0!==cr)return cr;throw new Error("unable to locate global object")}(),gr=pr.fetch?(...e)=>pr.fetch(...e):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),mr=pr.Headers,yr=pr.AbortController;function asyncCall(e,...t){try{return(s=e(...t))&&"function"==typeof s.then?s:Promise.resolve(s)}catch(e){return Promise.reject(e)}var s}function stringify(e){if(function(e){const t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return stringify(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}createFetch({fetch:gr,Headers:mr,AbortController:yr});const wr="base64:";function serializeRaw(t){return"string"==typeof t?t:wr+function(t){if(globalThis.Buffer)return e.from(t).toString("base64");return globalThis.btoa(String.fromCodePoint(...t))}(t)}function deserializeRaw(t){return"string"!=typeof t?t:t.startsWith(wr)?function(t){if(globalThis.Buffer)return e.from(t,"base64");return Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}(t.slice(7)):t}const br=["has","hasItem","get","getItem","getItemRaw","set","setItem","setItemRaw","del","remove","removeItem","getMeta","setMeta","removeMeta","getKeys","clear","mount","unmount"];function normalizeKey$2(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function joinKeys$1(...e){return normalizeKey$2(e.join(":"))}function normalizeBaseKey(e){return(e=normalizeKey$2(e))?e+":":""}const memory=()=>{const e=new Map;return{name:"memory",getInstance:()=>e,hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,s){e.set(t,s)},setItemRaw(t,s){e.set(t,s)},removeItem(t){e.delete(t)},getKeys:()=>[...e.keys()],clear(){e.clear()},dispose(){e.clear()}}};function watch(e,t,s){return e.watch?e.watch((e,a)=>t(e,s+a)):()=>{}}async function dispose(e){"function"==typeof e.dispose&&await asyncCall(e.dispose)}const vr={},normalizeKey$1=function(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""},_r={getKeys:()=>Promise.resolve(Object.keys(vr)),hasItem:e=>(e=normalizeKey$1(e),Promise.resolve(e in vr)),getItem:e=>(e=normalizeKey$1(e),Promise.resolve(vr[e]?vr[e].import():null)),getMeta:e=>(e=normalizeKey$1(e),Promise.resolve(vr[e]?vr[e].meta:{}))};function createError(e,t,s){const a=new Error(`[unstorage] [${e}] ${t}`,s);return Error.captureStackTrace&&Error.captureStackTrace(a,createError),a}function getKVBinding(e="STORAGE"){return function(e){let t="[binding]";if("string"==typeof e&&(t=e,e=globalThis[t]||globalThis.__env__?.[t]),!e)throw createError("cloudflare",`Invalid binding \`${t}\`: \`${e}\``);for(const s of["get","put","delete"])if(!(s in e))throw createError("cloudflare",`Invalid binding \`${t}\`: \`${s}\` key is missing`);return e}(e)}const unstorage_47drivers_47cloudflare_45kv_45binding=e=>{const r=(t="")=>e.base?function(...e){return e.map(e=>function(e,t=":"){return e?e.replace(/[:/\\]/g,t).replace(/^[:/\\]|[:/\\]$/g,""):""}(e)).filter(Boolean).join(":")}(e.base,t):t;async function getKeys(t=""){t=r(t);const s=getKVBinding(e.binding),a=[];let c;do{const e=await s.list({prefix:t||void 0,cursor:c});a.push(...e.keys),c=e.list_complete?void 0:e.cursor}while(c);return a.map(e=>e.name)}return{name:"cloudflare-kv-binding",options:e,getInstance:()=>getKVBinding(e.binding),async hasItem(t){t=r(t);const s=getKVBinding(e.binding);return null!==await s.get(t)},getItem(t){t=r(t);return getKVBinding(e.binding).get(t)},setItem(t,s,a){t=r(t);return getKVBinding(e.binding).put(t,s,a?{expirationTtl:a?.ttl?Math.max(a.ttl,e.minTTL??60):void 0,...a}:void 0)},removeItem(t){t=r(t);return getKVBinding(e.binding).delete(t)},getKeys:t=>getKeys(t).then(t=>t.map(t=>e.base?t.slice(e.base.length):t)),async clear(t){const s=getKVBinding(e.binding),a=await getKeys(t);await Promise.all(a.map(e=>s.delete(e)))}}},xr=function(e={}){const t={mounts:{"":e.driver||memory()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},getMount=e=>{for(const s of t.mountpoints)if(e.startsWith(s))return{base:s,relativeKey:e.slice(s.length),driver:t.mounts[s]};return{base:"",relativeKey:e,driver:t.mounts[""]}},getMounts=(e,s)=>t.mountpoints.filter(t=>t.startsWith(e)||s&&e.startsWith(t)).map(s=>({relativeBase:e.length>s.length?e.slice(s.length):void 0,mountpoint:s,driver:t.mounts[s]})),onChange=(e,s)=>{if(t.watching){s=normalizeKey$2(s);for(const a of t.watchListeners)a(e,s)}},stopWatch=async()=>{if(t.watching){for(const e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},runBatch=(e,t,s)=>{const a=new Map,getBatch=e=>{let t=a.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},a.set(e.base,t)),t};for(const s of e){const e="string"==typeof s,a=normalizeKey$2(e?s:s.key),c=e?void 0:s.value,u=e||!s.options?t:{...t,...s.options},d=getMount(a);getBatch(d).items.push({key:a,value:c,relativeKey:d.relativeKey,options:u})}return Promise.all([...a.values()].map(e=>s(e))).then(e=>e.flat())},s={hasItem(e,t={}){e=normalizeKey$2(e);const{relativeKey:s,driver:a}=getMount(e);return asyncCall(a.hasItem,s,t)},getItem(e,t={}){e=normalizeKey$2(e);const{relativeKey:s,driver:a}=getMount(e);return asyncCall(a.getItem,s,t).then(e=>destr(e))},getItems:(e,t={})=>runBatch(e,t,e=>e.driver.getItems?asyncCall(e.driver.getItems,e.items.map(e=>({key:e.relativeKey,options:e.options})),t).then(t=>t.map(t=>({key:joinKeys$1(e.base,t.key),value:destr(t.value)}))):Promise.all(e.items.map(t=>asyncCall(e.driver.getItem,t.relativeKey,t.options).then(e=>({key:t.key,value:destr(e)}))))),getItemRaw(e,t={}){e=normalizeKey$2(e);const{relativeKey:s,driver:a}=getMount(e);return a.getItemRaw?asyncCall(a.getItemRaw,s,t):asyncCall(a.getItem,s,t).then(e=>deserializeRaw(e))},async setItem(e,t,a={}){if(void 0===t)return s.removeItem(e);e=normalizeKey$2(e);const{relativeKey:c,driver:u}=getMount(e);u.setItem&&(await asyncCall(u.setItem,c,stringify(t),a),u.watch||onChange("update",e))},async setItems(e,t){await runBatch(e,t,async e=>{if(e.driver.setItems)return asyncCall(e.driver.setItems,e.items.map(e=>({key:e.relativeKey,value:stringify(e.value),options:e.options})),t);e.driver.setItem&&await Promise.all(e.items.map(t=>asyncCall(e.driver.setItem,t.relativeKey,stringify(t.value),t.options)))})},async setItemRaw(e,t,a={}){if(void 0===t)return s.removeItem(e,a);e=normalizeKey$2(e);const{relativeKey:c,driver:u}=getMount(e);if(u.setItemRaw)await asyncCall(u.setItemRaw,c,t,a);else{if(!u.setItem)return;await asyncCall(u.setItem,c,serializeRaw(t),a)}u.watch||onChange("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t}),e=normalizeKey$2(e);const{relativeKey:s,driver:a}=getMount(e);a.removeItem&&(await asyncCall(a.removeItem,s,t),(t.removeMeta||t.removeMata)&&await asyncCall(a.removeItem,s+"$",t),a.watch||onChange("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t}),e=normalizeKey$2(e);const{relativeKey:s,driver:a}=getMount(e),c=Object.create(null);if(a.getMeta&&Object.assign(c,await asyncCall(a.getMeta,s,t)),!t.nativeOnly){const e=await asyncCall(a.getItem,s+"$",t).then(e=>destr(e));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(c,e))}return c},setMeta(e,t,s={}){return this.setItem(e+"$",t,s)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){e=normalizeBaseKey(e);const s=getMounts(e,!0);let a=[];const c=[];let u=!0;for(const e of s){e.driver.flags?.maxDepth||(u=!1);const s=await asyncCall(e.driver.getKeys,e.relativeBase,t);for(const t of s){const s=e.mountpoint+normalizeKey$2(t);a.some(e=>s.startsWith(e))||c.push(s)}a=[e.mountpoint,...a.filter(t=>!t.startsWith(e.mountpoint))]}const d=void 0!==t.maxDepth&&!u;return c.filter(s=>(!d||function(e,t){if(void 0===t)return!0;let s=0,a=e.indexOf(":");for(;a>-1;)s++,a=e.indexOf(":",a+1);return s<=t}(s,t.maxDepth))&&function(e,t){return t?e.startsWith(t)&&"$"!==e[e.length-1]:"$"!==e[e.length-1]}(s,e))},async clear(e,t={}){e=normalizeBaseKey(e),await Promise.all(getMounts(e,!1).map(async e=>{if(e.driver.clear)return asyncCall(e.driver.clear,e.relativeBase,t);if(e.driver.removeItem){const s=await e.driver.getKeys(e.relativeBase||"",t);return Promise.all(s.map(s=>e.driver.removeItem(s,t)))}}))},async dispose(){await Promise.all(Object.values(t.mounts).map(e=>dispose(e)))},watch:async e=>(await(async()=>{if(!t.watching){t.watching=!0;for(const e in t.mounts)t.unwatch[e]=await watch(t.mounts[e],onChange,e)}})(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter(t=>t!==e),0===t.watchListeners.length&&await stopWatch()}),async unwatch(){t.watchListeners=[],await stopWatch()},mount(e,a){if((e=normalizeBaseKey(e))&&t.mounts[e])throw new Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort((e,t)=>t.length-e.length)),t.mounts[e]=a,t.watching&&Promise.resolve(watch(a,onChange,e)).then(s=>{t.unwatch[e]=s}).catch(console.error),s},async unmount(e,s=!0){(e=normalizeBaseKey(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e]?.(),delete t.unwatch[e]),s&&await dispose(t.mounts[e]),t.mountpoints=t.mountpoints.filter(t=>t!==e),delete t.mounts[e])},getMount(e=""){e=normalizeKey$2(e)+":";const t=getMount(e);return{driver:t.driver,base:t.base}},getMounts(e="",t={}){e=normalizeKey$2(e);return getMounts(e,t.parents).map(e=>({driver:e.driver,base:e.mountpoint}))},keys:(e,t={})=>s.getKeys(e,t),get:(e,t={})=>s.getItem(e,t),set:(e,t,a={})=>s.setItem(e,t,a),has:(e,t={})=>s.hasItem(e,t),del:(e,t={})=>s.removeItem(e,t),remove:(e,t={})=>s.removeItem(e,t)};return s}({});function useStorage(e=""){return e?function(e,t){if(!(t=normalizeBaseKey(t)))return e;const s={...e};for(const a of br)s[a]=(s="",...c)=>e[a](t+s,...c);return s.getKeys=(s="",...a)=>e.getKeys(t+s,...a).then(e=>e.map(e=>e.slice(t.length))),s.keys=s.getKeys,s.getItems=async(s,a)=>{const c=s.map(e=>"string"==typeof e?t+e:{...e,key:t+e.key});return(await e.getItems(c,a)).map(e=>({key:e.key.slice(t.length),value:e.value}))},s.setItems=async(s,a)=>{const c=s.map(e=>({key:t+e.key,value:e.value,options:e.options}));return e.setItems(c,a)},s}(xr,e):xr}xr.mount("/assets",_r),xr.mount("cache",unstorage_47drivers_47cloudflare_45kv_45binding({driver:"cloudflare-kv-binding",binding:"CACHE"}));const Rr=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Er=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],kr=[];class k{_data=new l;_hash=new l([...Rr]);_nDataBytes=0;_minBufferSize=0;finalize(e){e&&this._append(e);const t=8*this._nDataBytes,s=8*this._data.sigBytes;return this._data.words[s>>>5]|=128<<24-s%32,this._data.words[14+(s+64>>>9<<4)]=Math.floor(t/4294967296),this._data.words[15+(s+64>>>9<<4)]=t,this._data.sigBytes=4*this._data.words.length,this._process(),this._hash}_doProcessBlock(e,t){const s=this._hash.words;let a=s[0],c=s[1],u=s[2],d=s[3],h=s[4],f=s[5],g=s[6],m=s[7];for(let s=0;s<64;s++){if(s<16)kr[s]=0|e[t+s];else{const e=kr[s-15],t=(e<<25|e>>>7)^(e<<14|e>>>18)^e>>>3,a=kr[s-2],c=(a<<15|a>>>17)^(a<<13|a>>>19)^a>>>10;kr[s]=t+kr[s-7]+c+kr[s-16]}const _=a&c^a&u^c&u,x=(a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22),R=m+((h<<26|h>>>6)^(h<<21|h>>>11)^(h<<7|h>>>25))+(h&f^~h&g)+Er[s]+kr[s];m=g,g=f,f=h,h=d+R|0,d=u,u=c,c=a,a=R+(x+_)|0}s[0]=s[0]+a|0,s[1]=s[1]+c|0,s[2]=s[2]+u|0,s[3]=s[3]+d|0,s[4]=s[4]+h|0,s[5]=s[5]+f|0,s[6]=s[6]+g|0,s[7]=s[7]+m|0}_append(e){"string"==typeof e&&(e=l.fromUtf8(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_process(e){let t,s=this._data.sigBytes/64;s=e?Math.ceil(s):Math.max((0|s)-this._minBufferSize,0);const a=16*s,c=Math.min(4*a,this._data.sigBytes);if(a){for(let e=0;e<a;e+=16)this._doProcessBlock(this._data.words,e);t=this._data.words.splice(0,a),this._data.sigBytes-=c}return new l(t,c)}}class l{words;sigBytes;constructor(e,t){e=this.words=e||[],this.sigBytes=void 0===t?4*e.length:t}static fromUtf8(e){const t=unescape(encodeURIComponent(e)),s=t.length,a=[];for(let e=0;e<s;e++)a[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new l(a,s)}toBase64(){const e=[];for(let t=0;t<this.sigBytes;t+=3){const s=(this.words[t>>>2]>>>24-t%4*8&255)<<16|(this.words[t+1>>>2]>>>24-(t+1)%4*8&255)<<8|this.words[t+2>>>2]>>>24-(t+2)%4*8&255;for(let a=0;a<4&&8*t+6*a<8*this.sigBytes;a++)e.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(s>>>6*(3-a)&63))}return e.join("")}concat(e){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let t=0;t<e.sigBytes;t++){const s=e.words[t>>>2]>>>24-t%4*8&255;this.words[this.sigBytes+t>>>2]|=s<<24-(this.sigBytes+t)%4*8}else for(let t=0;t<e.sigBytes;t+=4)this.words[this.sigBytes+t>>>2]=e.words[t>>>2];this.sigBytes+=e.sigBytes}}const Cr=(()=>{class Hasher2{buff="";#o=new Map;write(e){this.buff+=e}dispatch(e){return this[null===e?"null":typeof e](e)}object(t){if(t&&"function"==typeof t.toJSON)return this.object(t.toJSON());const s=Object.prototype.toString.call(t);let a="";const c=s.length;a=c<10?"unknown:["+s+"]":s.slice(8,c-1),a=a.toLowerCase();let u=null;if(void 0!==(u=this.#o.get(t)))return this.dispatch("[CIRCULAR:"+u+"]");if(this.#o.set(t,this.#o.size),void 0!==e&&e.isBuffer&&e.isBuffer(t))return this.write("buffer:"),this.write(t.toString("utf8"));if("object"!==a&&"function"!==a&&"asyncfunction"!==a)this[a]?this[a](t):this.unknown(t,a);else{const e=Object.keys(t).sort(),s=[];this.write("object:"+(e.length+s.length)+":");const dispatchForKey=e=>{this.dispatch(e),this.write(":"),this.dispatch(t[e]),this.write(",")};for(const t of e)dispatchForKey(t);for(const e of s)dispatchForKey(e)}}array(e,t){if(t=void 0!==t&&t,this.write("array:"+e.length+":"),!t||e.length<=1){for(const t of e)this.dispatch(t);return}const s=new Map,a=e.map(e=>{const t=new Hasher2;t.dispatch(e);for(const[e,a]of t.#o)s.set(e,a);return t.toString()});return this.#o=s,a.sort(),this.array(a,!1)}date(e){return this.write("date:"+e.toJSON())}symbol(e){return this.write("symbol:"+e.toString())}unknown(e,t){if(this.write(t),e)return this.write(":"),e&&"function"==typeof e.entries?this.array([...e.entries()],!0):void 0}error(e){return this.write("error:"+e.toString())}boolean(e){return this.write("bool:"+e)}string(e){this.write("string:"+e.length+":"),this.write(e)}function(e){this.write("fn:"),!function(e){if("function"!=typeof e)return!1;return"[native code] }"===Function.prototype.toString.call(e).slice(-15)}(e)?this.dispatch(e.toString()):this.dispatch("[native]")}number(e){return this.write("number:"+e)}null(){return this.write("Null")}undefined(){return this.write("Undefined")}regexp(e){return this.write("regex:"+e.toString())}arraybuffer(e){return this.write("arraybuffer:"),this.dispatch(new Uint8Array(e))}url(e){return this.write("url:"+e.toString())}map(e){this.write("map:");const t=[...e];return this.array(t,!1)}set(e){this.write("set:");const t=[...e];return this.array(t,!1)}bigint(e){return this.write("bigint:"+e.toString())}}for(const e of["uint8array","uint8clampedarray","unt8array","uint16array","unt16array","uint32array","unt32array","float32array","float64array"])Hasher2.prototype[e]=function(t){return this.write(e+":"),this.array([...t],!1)};return Hasher2})();function hash(e){return function(e){return(new k).finalize(e).toBase64()}("string"==typeof e?e:function(e){const t=new Cr;return t.dispatch(e),t.buff}(e)).replace(/[-_]/g,"").slice(0,10)}function defineCachedFunction(e,t={}){t={name:"_",base:"/cache",swr:!0,maxAge:1,...t};const s={},a=t.group||"nitro/functions",c=t.name||e.name||"_",u=t.integrity||hash([e,t]),d=t.validate||(e=>void 0!==e.value);return async(...h)=>{if(await(t.shouldBypassCache?.(...h)))return e(...h);const f=await(t.getKey||getKey)(...h),g=await(t.shouldInvalidateCache?.(...h)),m=await async function(e,h,f,g){const m=[t.base,a,c,e+".json"].filter(Boolean).join(":").replace(/:\/$/,":index");let _=await useStorage().getItem(m).catch(e=>{console.error("[cache] Cache read error.",e),useNitroApp().captureError(e,{event:g,tags:["cache"]})})||{};if("object"!=typeof _){_={};const e=new Error("Malformed data read from cache.");console.error("[cache]",e),useNitroApp().captureError(e,{event:g,tags:["cache"]})}const x=1e3*(t.maxAge??0);x&&(_.expires=Date.now()+x);const R=f||_.integrity!==u||x&&Date.now()-(_.mtime||0)>x||!1===d(_),E=R?(async()=>{const a=s[e];a||(void 0!==_.value&&(t.staleMaxAge||0)>=0&&!1===t.swr&&(_.value=void 0,_.integrity=void 0,_.mtime=void 0,_.expires=void 0),s[e]=Promise.resolve(h()));try{_.value=await s[e]}catch(t){throw a||delete s[e],t}if(!a&&(_.mtime=Date.now(),_.integrity=u,delete s[e],!1!==d(_))){let e;t.maxAge&&!t.swr&&(e={ttl:t.maxAge});const s=useStorage().setItem(m,_,e).catch(e=>{console.error("[cache] Cache write error.",e),useNitroApp().captureError(e,{event:g,tags:["cache"]})});g?.waitUntil&&g.waitUntil(s)}})():Promise.resolve();return void 0===_.value?await E:R&&g&&g.waitUntil&&g.waitUntil(E),t.swr&&!1!==d(_)?(E.catch(e=>{console.error("[cache] SWR handler error.",e),useNitroApp().captureError(e,{event:g,tags:["cache"]})}),_):E.then(()=>_)}(f,()=>e(...h),g,h[0]&&isEvent(h[0])?h[0]:void 0);let _=m.value;return t.transform&&(_=await t.transform(m,...h)||_),_}}function getKey(...e){return e.length>0?hash(e):""}function escapeKey(e){return String(e).replace(/\W/g,"")}function cloneWithProxy(e,t){return new Proxy(e,{get:(e,s,a)=>s in t?t[s]:Reflect.get(e,s,a),set:(e,s,a,c)=>s in t?(t[s]=a,!0):Reflect.set(e,s,a,c)})}const cachedEventHandler=function(e,t={name:"_",base:"/cache",swr:!0,maxAge:1}){const s=(t.varies||[]).filter(Boolean).map(e=>e.toLowerCase()).sort(),a={...t,getKey:async e=>{const a=await(t.getKey?.(e));if(a)return escapeKey(a);const c=e.node.req.originalUrl||e.node.req.url||e.path;let u;try{u=escapeKey(decodeURI(parseURL(c).pathname)).slice(0,16)||"index"}catch{u="-"}return[`${u}.${hash(c)}`,...s.map(t=>[t,e.node.req.headers[t]]).map(([e,t])=>`${escapeKey(e)}.${hash(t)}`)].join(":")},validate:e=>!!e.value&&(!(e.value.code>=400)&&(void 0!==e.value.body&&("undefined"!==e.value.headers.etag&&"undefined"!==e.value.headers["last-modified"]))),group:t.group||"nitro/handlers",integrity:t.integrity||hash([e,t])},c=function(e,t={}){return defineCachedFunction(e,t)}(async c=>{const u={};for(const e of s){const t=c.node.req.headers[e];void 0!==t&&(u[e]=t)}const d=cloneWithProxy(c.node.req,{headers:u}),h={};let f;const g=createEvent(d,cloneWithProxy(c.node.res,{statusCode:200,writableEnded:!1,writableFinished:!1,headersSent:!1,closed:!1,getHeader:e=>h[e],setHeader(e,t){return h[e]=t,this},getHeaderNames:()=>Object.keys(h),hasHeader:e=>e in h,removeHeader(e){delete h[e]},getHeaders:()=>h,end(e,t,s){return"string"==typeof e&&(f=e),"function"==typeof t&&t(),"function"==typeof s&&s(),this},write:(e,t,s)=>("string"==typeof e&&(f=e),"function"==typeof t&&t(void 0),"function"==typeof s&&s(),!0),writeHead(e,t){if(this.statusCode=e,t){if(Array.isArray(t)||"string"==typeof t)throw new TypeError("Raw headers  is not supported.");for(const e in t){const s=t[e];void 0!==s&&this.setHeader(e,s)}}return this}}));g.fetch=(e,t)=>fetchWithEvent(g,e,t,{fetch:useNitroApp().localFetch}),g.$fetch=(e,t)=>fetchWithEvent(g,e,t,{fetch:globalThis.$fetch}),g.waitUntil=c.waitUntil,g.context=c.context,g.context.cache={options:a};const m=await e(g)||f,_=g.node.res.getHeaders();_.etag=String(_.Etag||_.etag||`W/"${hash(m)}"`),_["last-modified"]=String(_["Last-Modified"]||_["last-modified"]||(new Date).toUTCString());const x=[];t.swr?(t.maxAge&&x.push(`s-maxage=${t.maxAge}`),t.staleMaxAge?x.push(`stale-while-revalidate=${t.staleMaxAge}`):x.push("stale-while-revalidate")):t.maxAge&&x.push(`max-age=${t.maxAge}`),x.length>0&&(_["cache-control"]=x.join(", "));return{code:g.node.res.statusCode,headers:_,body:m}},a);return defineEventHandler(async s=>{if(t.headersOnly){if(handleCacheHeaders(s,{maxAge:t.maxAge}))return;return e(s)}const a=await c(s);if(s.node.res.headersSent||s.node.res.writableEnded)return a.body;if(!handleCacheHeaders(s,{modifiedTime:new Date(a.headers["last-modified"]),etag:a.headers.etag,maxAge:t.maxAge})){s.node.res.statusCode=a.code;for(const e in a.headers){const t=a.headers[e];"set-cookie"===e?s.node.res.appendHeader(e,splitCookiesString(t)):void 0!==t&&s.node.res.setHeader(e,t)}return a.body}})};function klona(e){if("object"!=typeof e)return e;var t,s,a=Object.prototype.toString.call(e);if("[object Object]"===a){if(e.constructor!==Object&&"function"==typeof e.constructor)for(t in s=new e.constructor,e)e.hasOwnProperty(t)&&s[t]!==e[t]&&(s[t]=klona(e[t]));else for(t in s={},e)"__proto__"===t?Object.defineProperty(s,t,{value:klona(e[t]),configurable:!0,enumerable:!0,writable:!0}):s[t]=klona(e[t]);return s}if("[object Array]"===a){for(t=e.length,s=Array(t);t--;)s[t]=klona(e[t]);return s}return"[object Set]"===a?(s=new Set,e.forEach(function(e){s.add(klona(e))}),s):"[object Map]"===a?(s=new Map,e.forEach(function(e,t){s.set(klona(t),klona(e))}),s):"[object Date]"===a?new Date(+e):"[object RegExp]"===a?((s=new RegExp(e.source,e.flags)).lastIndex=e.lastIndex,s):"[object DataView]"===a?new e.constructor(klona(e.buffer)):"[object ArrayBuffer]"===a?e.slice(0):"Array]"===a.slice(-6)?new e.constructor(e):e}const Ar=Wt({nuxt:{}}),Sr=/\d/,Tr=["-","_","/","."];function isUppercase(e=""){if(!Sr.test(e))return e!==e.toLowerCase()}function kebabCase(e,t){return e?(Array.isArray(e)?e:function(e){const t=Tr,s=[];if(!e||"string"!=typeof e)return s;let a,c,u="";for(const d of e){const e=t.includes(d);if(!0===e){s.push(u),u="",a=void 0;continue}const h=isUppercase(d);if(!1===c){if(!1===a&&!0===h){s.push(u),u=d,a=h;continue}if(!0===a&&!1===h&&u.length>1){const e=u.at(-1);s.push(u.slice(0,Math.max(0,u.length-1))),u=e+d,a=h;continue}}u+=d,a=h,c=e}return s.push(u),s}(e)).map(e=>e.toLowerCase()).join(t):""}function getEnv(e,t){const s=(a=e,kebabCase(a||"","_")).toUpperCase();var a;return destr(x.env[t.prefix+s]??x.env[t.altPrefix+s])}function _isObject(e){return"object"==typeof e&&!Array.isArray(e)}function applyEnv(e,t,s=""){for(const a in e){const c=s?`${s}_${a}`:a,u=getEnv(c,t);_isObject(e[a])?_isObject(u)?(e[a]={...e[a],...u},applyEnv(e[a],t,c)):void 0===u?applyEnv(e[a],t,c):e[a]=u??e[a]:e[a]=u??e[a],t.envExpansion&&"string"==typeof e[a]&&(e[a]=_expandFromEnv(e[a]))}return e}const jr=/\{\{([^{}]*)\}\}/g;function _expandFromEnv(e){return e.replace(jr,(e,t)=>x.env[t]||e)}const Hr={app:{baseURL:"/",buildId:"be96be39-690f-4a4f-bf5c-9eff0188b047",buildAssetsDir:"/_nuxt/",cdnURL:""},nitro:{envPrefix:"NUXT_",routeRules:{"/__nuxt_error":{cache:!1},"/_nuxt/builds/meta/**":{headers:{"cache-control":"public, max-age=31536000, immutable"}},"/_nuxt/builds/**":{headers:{"cache-control":"public, max-age=1, immutable"}},"/_nuxt/**":{headers:{"cache-control":"public, max-age=31536000, immutable"}}}},public:{hub:{}},hub:{dir:"/Users/maxi/repros/nuxthub-839/.data",hosting:"cloudflare-pages",blob:!1,cache:{driver:"cloudflare-kv-binding",binding:"CACHE"},db:!1,kv:!1}},Ir={prefix:"NITRO_",altPrefix:Hr.nitro.envPrefix??x.env.NITRO_ENV_PREFIX??"_",envExpansion:Hr.nitro.envExpansion??x.env.NITRO_ENV_EXPANSION??!1},Pr=_deepFreeze(applyEnv(klona(Hr),Ir));function useRuntimeConfig(e){if(!e)return Pr;if(e.context.nitro.runtimeConfig)return e.context.nitro.runtimeConfig;const t=klona(Hr);return applyEnv(t,Ir),e.context.nitro.runtimeConfig=t,t}function _deepFreeze(e){const t=Object.getOwnPropertyNames(e);for(const s of t){const t=e[s];t&&"object"==typeof t&&_deepFreeze(t)}return Object.freeze(e)}_deepFreeze(klona(Ar)),new Proxy(Object.create(null),{get:(e,t)=>{console.warn("Please use `useRuntimeConfig()` instead of accessing config directly.");const s=useRuntimeConfig();if(t in s)return s[t]}});const Mr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==cr?cr:{},Or="__unctx__",Br=Mr[Or]||(Mr[Or]=function(e={}){const t={};return{get:(s,a={})=>(t[s]||(t[s]=function(e={}){let t,s=!1;const checkConflict=e=>{if(t&&t!==e)throw new Error("Context conflict")};let a;if(e.asyncContext){const t=e.AsyncLocalStorage||globalThis.AsyncLocalStorage;t?a=new t:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const _getCurrentInstance=()=>{if(a){const e=a.getStore();if(void 0!==e)return e}return t};return{use:()=>{const e=_getCurrentInstance();if(void 0===e)throw new Error("Context is not available");return e},tryUse:()=>_getCurrentInstance(),set:(e,a)=>{a||checkConflict(e),t=e,s=!0},unset:()=>{t=void 0,s=!1},call:(e,c)=>{checkConflict(e),t=e;try{return a?a.run(e,c):c()}finally{s||(t=void 0)}},async callAsync(e,c){t=e;const onRestore=()=>{t=e},onLeave=()=>t===e?onRestore:void 0;qr.add(onLeave);try{const u=a?a.run(e,c):c();return s||(t=void 0),await u}finally{qr.delete(onLeave)}}}}({...e,...a})),t[s])}}()),Nr="__unctx_async_handlers__",qr=Mr[Nr]||(Mr[Nr]=new Set),$r=((e,t={})=>Br.get(e,t))("nitro-app",{asyncContext:!0,AsyncLocalStorage:d}),Ur=toRouteMatcher(createRouter$1({routes:useRuntimeConfig().nitro.routeRules}));function createRouteRulesHandler(e){return or(t=>{const s=getRouteRules(t);if(s.headers&&tr(t,s.headers),s.redirect){let e=s.redirect.to;if(e.endsWith("/**")){let a=t.path;const c=s.redirect._redirectStripBase;c&&(a=withoutBase(a,c)),e=joinURL(e.slice(0,-3),a)}else if(t.path.includes("?")){e=withQuery(e,getQuery$1(t.path))}return function(e,t,s=302){return e.node.res.statusCode=sanitizeStatusCode(s,e.node.res.statusCode),e.node.res.setHeader("location",t),send(e,`<!DOCTYPE html><html><head><meta http-equiv="refresh" content="0; url=${t.replace(/"/g,"%22")}"></head></html>`,Xt.html)}(t,e,s.redirect.statusCode)}if(s.proxy){let a=s.proxy.to;if(a.endsWith("/**")){let e=t.path;const c=s.proxy._proxyStripBase;c&&(e=withoutBase(e,c)),a=joinURL(a.slice(0,-3),e)}else if(t.path.includes("?")){a=withQuery(a,getQuery$1(t.path))}return proxyRequest(t,a,{fetch:e.localFetch,...s.proxy})}})}function getRouteRules(e){return e.context._nitro=e.context._nitro||{},e.context._nitro.routeRules||(e.context._nitro.routeRules=getRouteRulesForPath(withoutBase(e.path.split("?")[0],useRuntimeConfig().app.baseURL))),e.context._nitro.routeRules}function getRouteRulesForPath(e){return Kt({},...Ur.matchAll(e).reverse())}const Lr=/post|put|patch/i;function joinHeaders(e){return Array.isArray(e)?e.join(", "):String(e)}function normalizeCookieHeader(e=""){return splitCookiesString(joinHeaders(e))}function normalizeCookieHeaders(e){const t=new Headers;for(const[s,a]of e)if("set-cookie"===s)for(const e of normalizeCookieHeader(a))t.append("set-cookie",e);else t.set(s,joinHeaders(a));return t}function hasReqHeader(e,t,s){const a=function(e,t){return getRequestHeaders(e)[t.toLowerCase()]}(e,t);return a&&"string"==typeof a&&a.toLowerCase().includes(s)}function defaultHandler(e,t,s){const a=e.unhandled||e.fatal,c=e.statusCode||500,u=e.statusMessage||"Server Error",d=function(e,t={}){const s=function(e,t={}){if(t.xForwardedHost){const t=e.node.req.headers["x-forwarded-host"],s=(t||"").split(",").shift()?.trim();if(s)return s}return e.node.req.headers.host||"localhost"}(e,t),a=function(e,t={}){return!1!==t.xForwardedProto&&"https"===e.node.req.headers["x-forwarded-proto"]||e.node.req.connection?.encrypted?"https":"http"}(e,t),c=(e.node.req.originalUrl||e.path).replace(/^[/\\]+/g,"/");return new URL(c,`${a}://${s}`)}(t,{xForwardedHost:!0,xForwardedProto:!0});if(404===c){const e="/";if(/^\/[^/]/.test(e)&&!d.pathname.startsWith(e)){return{status:302,statusText:"Found",headers:{location:`${e}${d.pathname.slice(1)}${d.search}`},body:"Redirecting..."}}}if(a&&!s?.silent){const s=[e.unhandled&&"[unhandled]",e.fatal&&"[fatal]"].filter(Boolean).join(" ");console.error(`[request error] ${s} [${t.method}] ${d}\n`,e)}const h={"content-type":"application/json","x-content-type-options":"nosniff","x-frame-options":"DENY","referrer-policy":"no-referrer","content-security-policy":"script-src 'none'; frame-ancestors 'none';"};setResponseStatus(t,c,u),404!==c&&function(e,t){return e.node.res.getHeader(t)}(t,"cache-control")||(h["cache-control"]="no-cache");return{status:c,statusText:u,headers:h,body:{error:!0,url:d.href,statusCode:c,statusMessage:u,message:a?"Server Error":e.message,data:a?void 0:e.data}}}const zr=[async function(e,t,{defaultHandler:s}){if(t.handled||function(e){return!hasReqHeader(e,"accept","text/html")&&(hasReqHeader(e,"accept","application/json")||hasReqHeader(e,"user-agent","curl/")||hasReqHeader(e,"user-agent","httpie/")||hasReqHeader(e,"sec-fetch-mode","cors")||e.path.startsWith("/api/")||e.path.endsWith(".json"))}(t))return;const a=await s(e,t,{json:!0});if(404===(e.status||e.statusCode||500)&&302===a.status)return setResponseHeaders(t,a.headers),setResponseStatus(t,a.status,a.statusText),send(t,JSON.stringify(a.body,null,2));const c=a.body,u=new URL(c.url);c.url=withoutBase(u.pathname,useRuntimeConfig(t).app.baseURL)+u.search+u.hash,c.message=e.unhandled?c.message||"Server Error":e.message||c.message||"Server Error",c.data||=e.data,c.statusText||=e.statusText||e.statusMessage,delete a.headers["content-type"],delete a.headers["content-security-policy"],setResponseHeaders(t,a.headers);const d=getRequestHeaders(t),h=t.path.startsWith("/__nuxt_error")||!!d["x-nuxt-error"]?null:await useNitroApp().localFetch(withQuery(joinURL(useRuntimeConfig(t).app.baseURL,"/__nuxt_error"),c),{headers:{...d,"x-nuxt-error":"true"},redirect:"manual"}).catch(()=>null);if(t.handled)return;if(!h){const{template:e}=await import("../_/error-500.mjs");return setResponseHeader(t,"Content-Type","text/html;charset=UTF-8"),send(t,e(c))}const f=await h.text();for(const[e,s]of h.headers.entries())"set-cookie"!==e?setResponseHeader(t,e,s):appendResponseHeader(t,e,s);return setResponseStatus(t,h.status&&200!==h.status?h.status:a.status,h.statusText||a.statusText),send(t,f)},function(e,t){const s=defaultHandler(e,t);return setResponseHeaders(t,s.headers),setResponseStatus(t,s.status,s.statusText),send(t,JSON.stringify(s.body,null,2))}];const Kr=[],_lazy_0wBRcu=()=>import("../routes/renderer.mjs"),Wr=[{route:"/api/hello",handler:()=>import("../routes/api/hello.get.mjs"),lazy:!0,middleware:!1,method:"get"},{route:"/__nuxt_error",handler:_lazy_0wBRcu,lazy:!0,middleware:!1,method:void 0},{route:"/__nuxt_island/**",handler:defineEventHandler(()=>{}),lazy:!1,middleware:!1,method:void 0},{route:"/**",handler:_lazy_0wBRcu,lazy:!0,middleware:!1,method:void 0}];const Dr=function(){const e=useRuntimeConfig(),t=new Hookable,captureError=(e,s={})=>{const a=t.callHookParallel("error",e,s).catch(e=>{console.error("Error while capturing another error",e)});if(s.event&&isEvent(s.event)){const t=s.event.context.nitro?.errors;t&&t.push({error:e,context:s}),s.event.waitUntil&&s.event.waitUntil(a)}},s=createApp({debug:destr(!1),onError:(e,t)=>(captureError(e,{event:t,tags:["request"]}),async function(e,t){for(const s of zr)try{if(await s(e,t,{defaultHandler:defaultHandler}),t.handled)return}catch(e){console.error(e)}}(e,t)),onRequest:async e=>{e.context.nitro=e.context.nitro||{errors:[]};const t=e.node.req?.__unenv__;t?._platform&&(e.context={_platform:t?._platform,...t._platform,...e.context}),!e.context.waitUntil&&t?.waitUntil&&(e.context.waitUntil=t.waitUntil),e.fetch=(t,s)=>fetchWithEvent(e,t,s,{fetch:localFetch}),e.$fetch=(t,s)=>fetchWithEvent(e,t,s,{fetch:u}),e.waitUntil=t=>{e.context.nitro._waitUntilPromises||(e.context.nitro._waitUntilPromises=[]),e.context.nitro._waitUntilPromises.push(t),e.context.waitUntil&&e.context.waitUntil(t)},e.captureError=(t,s)=>{captureError(t,{event:e,...s})},await Dr.hooks.callHook("request",e).catch(t=>{captureError(t,{event:e,tags:["request"]})})},onBeforeResponse:async(e,t)=>{await Dr.hooks.callHook("beforeResponse",e,t).catch(t=>{captureError(t,{event:e,tags:["request","response"]})})},onAfterResponse:async(e,t)=>{await Dr.hooks.callHook("afterResponse",e,t).catch(t=>{captureError(t,{event:e,tags:["request","response"]})})}}),a=function(e={}){const t=createRouter$1({}),s={};let a;const c={},addRoute=(e,a,u)=>{let d=s[e];if(d||(s[e]=d={path:e,handlers:{}},t.insert(e,d)),Array.isArray(u))for(const t of u)addRoute(e,a,t);else d.handlers[u]=toEventHandler(a,0,e);return c};c.use=c.add=(e,t,s)=>addRoute(e,t,s||"all");for(const e of sr)c[e]=(t,s)=>c.add(t,s,e);const matchHandler=(e="/",s="get")=>{const c=e.indexOf("?");-1!==c&&(e=e.slice(0,Math.max(0,c)));const u=t.lookup(e);if(!u||!u.handlers)return{error:createError$1({statusCode:404,name:"Not Found",statusMessage:`Cannot find any route matching ${e||"/"}.`})};let d=u.handlers[s]||u.handlers.all;if(!d){a||(a=toRouteMatcher(t));const c=a.matchAll(e).reverse();for(const e of c){if(e.handlers[s]){d=e.handlers[s],u.handlers[s]=u.handlers[s]||d;break}if(e.handlers.all){d=e.handlers.all,u.handlers.all=u.handlers.all||d;break}}}return d?{matched:u,handler:d}:{error:createError$1({statusCode:405,name:"Method Not Allowed",statusMessage:`Method ${s} is not allowed on this route.`})}},u=e.preemptive||e.preemtive;return c.handler=or(e=>{const t=matchHandler(e.path,e.method.toLowerCase());if("error"in t){if(u)throw t.error;return}e.context.matchedRoute=t.matched;const s=t.matched.params||{};return e.context.params=s,Promise.resolve(t.handler(e)).then(e=>void 0===e&&u?null:e)}),c.handler.__resolve__=async e=>{e=withLeadingSlash(e);const t=matchHandler(e);if("error"in t)return;let s={route:t.matched.path,handler:t.handler};if(t.handler.__resolve__){const a=await t.handler.__resolve__(e);if(!a)return;s={...s,...a}}return s},c}({preemptive:!0}),c=toNodeListener(s),localFetch=(e,t)=>e.toString().startsWith("/")?async function(e,t,s={}){try{const a=await b(e,{url:t,...s});return new Response(a.body,{status:a.status,statusText:a.statusText,headers:v(a.headers)})}catch(e){return new Response(e.toString(),{status:Number.parseInt(e.statusCode||e.code)||500,statusText:e.statusText})}}(c,e,t).then(e=>function(e){return e.headers.has("set-cookie")?new Response(e.body,{status:e.status,statusText:e.statusText,headers:normalizeCookieHeaders(e.headers)}):e}(e)):globalThis.fetch(e,t),u=createFetch({fetch:localFetch,Headers:mr,defaults:{baseURL:e.app.baseURL}});globalThis.$fetch=u,s.use(createRouteRulesHandler({localFetch:localFetch}));for(const t of Wr){let c=t.lazy?lazyEventHandler(t.handler):t.handler;if(t.middleware||!t.route){const a=(e.app.baseURL+(t.route||"/")).replace(/\/+/g,"/");s.use(a,c)}else{const e=getRouteRulesForPath(t.route.replace(/:\w+|\*\*/g,"_"));e.cache&&(c=cachedEventHandler(c,{group:"nitro/routes",...e.cache})),a.use(t.route,c,t.method)}}s.use(e.app.baseURL,a.handler);{const e=s.handler;s.handler=t=>{const s={event:t};return $r.callAsync(s,()=>e(t))}}return{hooks:t,h3App:s,router:a,localCall:e=>b(c,e),localFetch:localFetch,captureError:captureError}}();function useNitroApp(){return Dr}function defineRenderHandler(e){const t=useRuntimeConfig();return or(async s=>{const a=useNitroApp(),c={event:s,render:e,response:void 0};if(await a.hooks.callHook("render:before",c),!c.response){if(s.path===`${t.app.baseURL}favicon.ico`)return setResponseHeader(s,"Content-Type","image/x-icon"),send(s,"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7");if(c.response=await c.render(s),!c.response){const e=getResponseStatus(s);return setResponseStatus(s,200===e?500:e),send(s,"No response returned from render handler: "+s.path)}}return await a.hooks.callHook("render:response",c.response,c),c.response.headers&&setResponseHeaders(s,c.response.headers),(c.response.statusCode||c.response.statusMessage)&&setResponseStatus(s,c.response.statusCode,c.response.statusMessage),c.response.body})}!function(e){for(const t of Kr)try{t(e)}catch(t){throw e.captureError(t,{tags:["plugin"]}),t}}(Dr);const Fr={"/index.html":{type:"text/html;charset=utf-8",etag:'"2a8-adq31VyhgnC2/lTpo09/MIufsbY"',mtime:"2026-02-13T15:32:50.332Z",size:680,path:"../index.html"},"/nitro.json":{type:"application/json",etag:'"149-TYaLHcue8ui3+AfUPSeAu10v7SA"',mtime:"2026-02-13T15:32:50.318Z",size:329,path:"../nitro.json"},"/about.html":{type:"text/html;charset=utf-8",etag:'"2a8-ImU0vwX8pdUX6hdk/D1KwaiWSNc"',mtime:"2026-02-13T15:32:50.332Z",size:680,path:"../about.html"},"/_nuxt/Baclch9w.js":{type:"text/javascript; charset=utf-8",etag:'"1f8-jrqupkqvW6Ltp57RJe6deyDvZmQ"',mtime:"2026-02-13T15:32:50.608Z",size:504,path:"../_nuxt/Baclch9w.js"},"/_nuxt/C8vyCW0d.js":{type:"text/javascript; charset=utf-8",etag:'"1c44-B8i4FLeo/k4dRj82yQ0vGAz2vBU"',mtime:"2026-02-13T15:32:50.608Z",size:7236,path:"../_nuxt/C8vyCW0d.js"},"/_nuxt/C_4hsOIA.js":{type:"text/javascript; charset=utf-8",etag:'"d40-qYe7QzLxXO0b6k3JSdvWeK/HZ8M"',mtime:"2026-02-13T15:32:50.608Z",size:3392,path:"../_nuxt/C_4hsOIA.js"},"/_nuxt/D9MMTIWk.js":{type:"text/javascript; charset=utf-8",etag:'"f7-5iA9BHKcfpFejG/hT8/cDQ41oPA"',mtime:"2026-02-13T15:32:50.608Z",size:247,path:"../_nuxt/D9MMTIWk.js"},"/_nuxt/DrZeU6st.js":{type:"text/javascript; charset=utf-8",etag:'"203-4hWMNWCtGDWQcAbDrxX9GQ2Zn0U"',mtime:"2026-02-13T15:32:50.608Z",size:515,path:"../_nuxt/DrZeU6st.js"},"/_nuxt/DwchA6KZ.js":{type:"text/javascript; charset=utf-8",etag:'"eb2-vKaGGEC1qtQ5C/4p9Z0XCjCvUYI"',mtime:"2026-02-13T15:32:50.608Z",size:3762,path:"../_nuxt/DwchA6KZ.js"},"/_nuxt/builds/latest.json":{type:"application/json",etag:'"47-YUij1ZEA3WMcyvNf4BrPa5O1LpI"',mtime:"2026-02-13T15:32:50.606Z",size:71,path:"../_nuxt/builds/latest.json"},"/_nuxt/error-500.BxDPHVt9.css":{type:"text/css; charset=utf-8",etag:'"75a-M/51lozgaXwQlwjxu+/6XwtOwP4"',mtime:"2026-02-13T15:32:50.608Z",size:1882,path:"../_nuxt/error-500.BxDPHVt9.css"},"/_nuxt/error-404.CXA6SEwd.css":{type:"text/css; charset=utf-8",etag:'"dca-WTCDSbdays0TxWgFsvNR1o5aTuo"',mtime:"2026-02-13T15:32:50.608Z",size:3530,path:"../_nuxt/error-404.CXA6SEwd.css"},"/_nuxt/builds/meta/be96be39-690f-4a4f-bf5c-9eff0188b047.json":{type:"application/json",etag:'"58-YBUKjp41Bi1BwvVBtGCkxvKb45k"',mtime:"2026-02-13T15:32:50.605Z",size:88,path:"../_nuxt/builds/meta/be96be39-690f-4a4f-bf5c-9eff0188b047.json"},"/_nuxt/Bybc3iHE.js":{type:"text/javascript; charset=utf-8",etag:'"29b80-nba+L5rR2GXOnVzE2wvBA6T97sI"',mtime:"2026-02-13T15:32:50.608Z",size:170880,path:"../_nuxt/Bybc3iHE.js"},"/_nuxt/BHxqAgaG.js":{type:"text/javascript; charset=utf-8",etag:'"1496-slV1B7jnWPvyRZdtDNkAP9vspkI"',mtime:"2026-02-13T15:32:50.608Z",size:5270,path:"../_nuxt/BHxqAgaG.js"}},Qr={"/_nuxt/builds/meta/":{maxAge:31536e3},"/_nuxt/builds/":{maxAge:1},"/_nuxt/":{maxAge:31536e3}};const Vr=useNitroApp(),Zr={async fetch(t,s,a){const c=new URL(t.url);if(s.ASSETS&&function(e=""){if(Fr[e])return!0;for(const t in Qr)if(e.startsWith(t))return!0;return!1}(c.pathname))return s.ASSETS.fetch(t);let u;return function(e){return Lr.test(e.method)}(t)&&(u=e.from(await t.arrayBuffer())),globalThis.__env__=s,Vr.localFetch(c.pathname+c.search,{context:{waitUntil:e=>a.waitUntil(e),_platform:{cf:t.cf,cloudflare:{request:t,env:s,context:a}}},host:c.hostname,protocol:c.protocol,method:t.method,headers:t.headers,body:u})},scheduled(e,t,s){}};export{getResponseStatusText as a,getResponseStatus as b,defineRenderHandler as c,defineEventHandler as d,createError$1 as e,getRouteRules as f,getQuery as g,joinURL as h,useNitroApp as i,joinRelativeURL as j,Zr as k,useRuntimeConfig as u,withLeadingSlash as w};
//# sourceMappingURL=nitro.mjs.map
